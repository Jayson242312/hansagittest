external inner procedure TSERWNT_LAT;
external function integer CountCOFields(boolean);
external procedure ShowCOFields(real,real,real);
external procedure ShowBFlatFields(var integer,record BFlatFieldSetBlock,real,real);
external procedure ShowFlatFields(string);
external procedure ShowBuildFields(var integer,record BuildFieldSetBlock,real,real,string);
external procedure DrawSelectionButtonsFlatCounters(real,real,integer,integer,string,string,string,string,string,string);
  
SetLangMode(LangLatvian,"LAT",2);	//##ii to support LAT special characters in GUI

window MSClassLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Namu apsaimniekošanas klases",MSClassLClass,CGmlist,-);
    SpawnClass(MSClassDClass);
    SetWRect(20,80,560,298);
    Sizeable(-1,-1,0,0);
    UseView(MSClassVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlColKey(100,100,"Apraksts",Description,false,Description);
    RlColKey(420,420,"Tips",CTypeCode,false,CTypeCode);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window MSClassSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot klasi",MSClassSClass,CGslist,-);
    SpawnClass(MSClassDClass);
    SetWRect(20,80,560,298);
    Sizeable(-1,-1,0,0);
    UseView(MSClassVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlColKey(100,100,"Apraksts",Description,false,Description);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window MSClassDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2;
  real v,vs;

  WindowBegin("Namu apsaimniekošanas klase",MSClassDClass,CGview,-);
    SetWRect(64,80,500,200);
    UseView(MSClassVc);
    h=120; h1=390; h2=450;
    vs = 20;
    EditField(h,v=12,100,"Kods",Normal,Code,false,0);
    EditField(h,v+=vs,200,"Nosaukums",Normal,Description,false,0);
    EditFieldTL(h,v+=vs,100,"Klasifikācijas tips",M4Code,Normal,10,CTypeCode,false,CTypeSClass);
    SoftEditField(h,v+=vs,200,"Nosaukums",ViewOnly,"CTypeComment",false,0,M4Str,60);
  EndWindow;

  return;
end;

window FlatFieldSetTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2;
  real v,vs;

  WindowBegin("Telpas lauku uzstādījumi",FlatFieldSetTClass,CGHbl,HBlRecType);
    SetBlid(FlatFieldSetBlock);
    SetWRect(20,80,340,480);
    h = 8; v = 26; h1=24;
    MatrixBegin(h,v,-31,-20,-,20);
    MatCol(1,h1,"Lauks",0,FieldCode,false,FlatFieldCodeSClass);
    MatCol(1,h1+100,"Nosaukums",0,Name,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window FlatFieldCodeSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2;
  real v,vs;

  WindowBegin("Telpas lauki",FlatFieldCodeSClass,CGslist,-);
    SpawnClass(FlatFieldCodeDClass);
    SetWRect(20,80,460,300);
    UseView(FlatFieldCodeVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Lauks",FieldCode,false,FieldCode);
    RlColKey(100,100,"Īsais nosaukums",ShortName,false,ShortName);
    RlColKey(200,200,"Nosaukums",Name,false,Name);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window FlatFieldCodeDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2;
  real v,vs;

  WindowBegin("Telpas lauks",FlatFieldCodeDClass,CGview,-);
    SetWRect(64,80,520,200);
    UseView(FlatFieldCodeVc);
    h = 80;
    h2 = h + 200;
    vs = 20;
    v = 12;
    EditField(h,v,90,"Lauks",Normal,FieldCode,false,0);
    EditField(h2,v,100,"Īsais nosaukums",Normal,ShortName,false,0);
    EditField(h,v+=vs,300,"Nosaukums",Normal,Name,false,0);
    EditField(h,v+=vs,70,"Tips",Normal,FieldType,false,SetSClass);
    CheckBox(h2,v,0,"Vidējais aprēķins",CalcAvg);
    EditField(h,v+=vs,70,"Minimums",Normal,Minimum,false,0);
  EndWindow;

  return;
end;

window FlatFieldCodeLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2;
  real v,vs;

  WindowBegin("Telpas lauki",FlatFieldCodeLClass,CGmlist,-);
    SpawnClass(FlatFieldCodeDClass);
    SetWRect(20,80,460,300);
    UseView(FlatFieldCodeVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Lauks",FieldCode,false,FieldCode);
    RlColKey(100,100,"Īsais nosaukums",ShortName,false,ShortName);
    RlColKey(200,200,"Nosaukums",Name,false,Name);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window FlatFieldLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Telpas lauku vērtības",FlatFieldLClass,CGmlist,-);
    SpawnClass(FlatFieldDClass);
    SetWRect(20,80,300,400);
    Sizeable(-1,-1,0,0);
    UseView(FlatFieldVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Telpa",FlatCode,false,FlatCode);
    RlColKey(100,100,"Lauks",FieldCode,false,FieldCode);
    RlColKey(200,200,"Ēka",BuildCode,false,BuildFieldCode);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window FlatFieldDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Telpas lauka vērtības",FlatFieldDClass,CGview,-);
    SetWRect(64,80,650,350);
    UseView(FlatFieldVc);
    h = 80;
    vs = 20;
    v = 12;
    EditField(h,v,80,"Lauks",Normal,FieldCode,false,FlatFieldCodeSClass);
    EditField(h+140,v,100,"Telpa",Normal,FlatCode,false,FlatsSClass);
    EditField(h+280,v,100,"Ēka",ViewOnly,BuildCode,false,BuildSClass);
    MatrixBegin(4,v+=50,-50,-19,-,399);
    MatCol(1,32,"Datums",0,StartDate,false,PasteCurDate);
    MatCol(1,120,"Vērtība",0,Value,false,0);
    MatCol(1,200,"Komentārs",0,Comment,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window ChFlatFieldWClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Atvērt telpas lauka vērtības",ChFlatFieldWClass,CGother,RcType);
    SetWRect(100,100,420,160);
    UseView(RcVc);
    h = 80;
    vs = 20;
    v = 12;
    EditField(h,v,100,"Lauks",Normal,f2,false,FlatFieldCodeSClass);
    HalPushButton(h+130,v-5,h+230,v+15,"OpenFlatField","Atvērt");
    //EditField(h,v+=vs,100,"Telpa",Normal,f1,false,FlatsSClass);
  EndWindow;

  return;
end;

window BFlatFieldSetTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,v,vs;

  WindowBegin("Ēkas telpu lauku uzstādījumi",BFlatFieldSetTClass,CGHbl,HBlRecType);
    SetBlid(BFlatFieldSetBlock);
    SetWRect(20,80,340,480);
    h = 8; v = 26; h1=24;
    MatrixBegin(h,v,-31,-20,-,20);
    MatCol(1,h1,"Lauks",0,FieldCode,false,FlatFieldCodeSClass);
    MatCol(1,h1+100,"Nosaukums",0,Name,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window NAContractSerTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Numuru sērijas - Līgumi",NAContractSerTClass,CGHbl,HBlRecType);
    SetBlid(NAContractSerBlock);
    TSERWNT_LAT;
  EndWindow;

  return;
end;

window NAContractLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Līgumi",NAContractLClass,CGmlist,-);
    SpawnClass(NAContractDClass);
    SetWRect(20,80,1120,298);
    Sizeable(-1,-1,0,0);
    UseView(NAContractVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,2,"Nr.",SerNr,false,SerNr);
    RlColKeyTL(76,76,"Apst.",M4Mark,OKFlag,false,OKFlag);
    RlColKey(115,115,"Līguma Nr.",ContractNr,false,ContractNr);
    RlColKey(185,185,"Vecais konta nr.",OldCode,false,OldCode);
    RlColKey(275,275,"Klients",CustCode,false,CustCode);
    RlColKey(335,335,"Nosaukums",CustName,false,CustName);
    RlColKey(-600,-600,"Adrese",FlatAddress,false,FlatAddress);
    RlColKey(-420,-420,"Telpa",FlatCode,false,FlatCode);
    RlColKey(-350,-350,"Ēka",BuildCode,false,BuildCode);
    RlColKey(-280,-280,"Pēd. rēķ.",LastInvDate,false,LastInvDate);
    RlColKey(-210,-210,"Līg.datums",CODate,false,CODate);
    RlColKey(-140,-140,"Sākums",StartDate,false,StartDate);
    RlColKey(-70,-70,"Beigas",EndDate,false,EndDate);
    SearchField("Meklēt");
    SpecialMenu("Meklēt",'F',1,"NAContactSearchLsm");
  EndWindow;

  return;
end;

window NAContractSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Līgumi",NAContractSClass,CGslist,-);
    SpawnClass(NAContractDClass);
    SetWRect(20,80,1120,298);
    Sizeable(-1,-1,0,0);
    UseView(NAContractVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,2,"Nr.",SerNr,false,SerNr);
    RlColKeyTL(76,76,"Apst.",M4Mark,OKFlag,false,OKFlag);
    RlColKey(115,115,"Līguma Nr.",ContractNr,false,ContractNr);
    RlColKey(185,185,"Vecais konta nr.",OldCode,false,OldCode);
    RlColKey(275,275,"Klients",CustCode,false,CustCode);
    RlColKey(335,335,"Nosaukums",CustName,false,CustName);
    RlColKey(-600,-600,"Adrese",FlatAddress,false,FlatAddress);
    RlColKey(-420,-420,"Telpa",FlatCode,false,FlatCode);
    RlColKey(-350,-350,"Ēka",BuildCode,false,BuildCode);
    RlColKey(-280,-280,"Pēd. rēķ.",LastInvDate,false,LastInvDate);
    RlColKey(-210,-210,"Līg.datums",CODate,false,CODate);
    RlColKey(-140,-140,"Sākums",StartDate,false,StartDate);
    RlColKey(-70,-70,"Beigas",EndDate,false,EndDate);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window NAContract2SClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Līgumi",NAContract2SClass,CGslist,-);
    SpawnClass(NAContractDClass);
    SetWRect(20,80,1220,298);
    Sizeable(-1,-1,0,0);
    UseView(NAContractVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,2,"Nr.",SerNr,false,SerNr);
    RlColKeyTL(76,76,"Apst.",M4Mark,OKFlag,false,OKFlag);
    RlColKey(115,115,"Līguma Nr.",ContractNr,false,ContractNr);
    RlColKey(185,185,"Vecais konta nr.",OldCode,false,OldCode);
    RlColKey(275,275,"Klients",CustCode,false,CustCode);
    RlColKey(335,335,"Nosaukums",CustName,false,CustName);
    RlColKey(-670,-670,"Adrese",FlatAddress,false,FlatAddress);
    RlColKey(-490,-490,"Telpa",FlatCode,false,FlatCode);
    RlColKey(-420,-420,"Ēka",BuildCode,false,BuildCode);
    RlColKey(-350,-350,"Līg.datums",CODate,false,CODate);
    RlColKey(-280,-280,"Sākums",StartDate,false,StartDate);
    RlColKey(-210,-210,"Beigas",EndDate,false,EndDate);
    Calculatedcolumn(-140,-140,"Pēd.rēķ.","NAContractSClassInv",true);
    Calculatedcolumn(-70,-70,"Parāds","NAContractSClassDebt",true);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window NAContractDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real x,h,h1,hl,h2,h3,h4,v,v2,vm,vs,t;
  string 255 label;
  integer cofieldcnt,tilenr;
  
  WindowBegin("Līgums",NAContractDClass,CGview,-);
    DynamicWindow;
    SetWRect(20,80,850,600);
    Sizeable(-1,-1,0,0);
    UseView(NAContractVc);
    ActiveFieldOnNew("FlatCode");
    CommunicateButton;
    h = 90; h2 = 180; h3 = 300; vs=20;
    Tile(0,120,false,"",CustCode);  //110
      EditField(h,vm=(v=16), 82,"Nr. (Konta nr.)",Normal,SerNr,false,TSerSClass);
    CheckBox(h3,v,0,"Apstiprināts",OKFlag);
    CheckBox(h3+120,v,0,"Apvienotais rēķins",MergedInvFlag);
    EditField(h,v+=vs,100,"Telpa",Normal,FlatCode,false,FlatsSClass);
    EnterSkip(CustCode);
    EditField(h3,v,-20,"Adrese",ViewOnly,FlatAddress,false,0);
    EditField(h,v+=vs,100, "Klients",Normal,CustCode,false,CUSClass);
    EnterSkip(StartDate);
    EditField(h3,v,-180,"Nosaukums",Normal,CustName,false,0);
    EditField(-100,v,-20,"Ēka",Normal,BuildCode,false,BuildSClass);
    EditField(h,v+=vs,82,"Vecais konta nr",Normal,OldCode,false,0);
    cofieldcnt = CountCOFields(true);
    tilenr = 1;
    TileButton(tilenr,"Temiņi"); tilenr = tilenr + 1;
    TileButton(tilenr,"Artikuli"); tilenr = tilenr + 1;
    if cofieldcnt>0 then begin
      TileButton(tilenr,"Līg. lauki"); tilenr = tilenr + 1;
    end;
    TileButton(tilenr,"Rēķinu nosūtīšana"); tilenr = tilenr + 1;
    TileButton(tilenr,"Valūta"); tilenr = tilenr + 1;
    TileButton(tilenr,"Papildinformācija");

    tilenr = 1;
    Tile(tilenr,160,false,"1",StartDate); tilenr = tilenr + 1;
    vs = 20; h1 = 140; h2 = 360; h3=600;
    // EditField(h1,v=6,20,"Sam. term.",Normal,PayDeal,false,PDSClass);
    EditField(h1,v=6,82,"Objekts",Normal,Objects,false,ObjSClass);
    EditField(h2,v,82,"Soda % kods",Normal,IntPercCode,false,IntPercSClass);
    EditField(h3,v,60,"Aģents",Normal,SalesMan,false,UserSClass);
    EditField(h1,v+=vs,82,"Sākuma datums",Normal,StartDate,false,PasteCurDate);
    EditField(h2,v,82,"Beigu datums",Normal,EndDate,false,PasteCurDate);
    EditField(h3,v,50,"Pap. dienas līgumsoda apr.",Normal,MSIntAddDays,false,0);
    EditField(h1,v+=vs,82,"Līguma datums",Normal,CODate,false,PasteCurDate);
    EditField(h2,v,82,"Pēdējā rēķ. dat.",Normal,LastInvDate,false,PasteCurDate);
    EditField(h3,v,50,"Apm.prior.",Normal,INPayPriority,false,INPayPrioritySClass);
    EditField(h1,v+=vs,302,"Klasifikācija",Normal,Classification,false,CClassSClass);
    EditField(h3,v,50,"Klase",Normal,ContractClass,false,ContractClassSClass);
    EditField(h1,v+=vs,150,"Siltumenerģijas līguma nr.",Normal,ContractNr,false,0);
    EditField(h3,v,50,"Valoda",Normal,LangCode,false,LangSClass);
    Tile(tilenr,200,true,"2",Math); tilenr = tilenr + 1;
    v = 24;
    MatrixBegin(4,v,-50,-9,-,99);
    MatTypedRow(stp);
    Flip(0);
    MatColTL(t=1,32,"Artikuls",0,M4Code,Normal,20,ArtCode,false,INSClass);
    MatColTL(t,144,"Nosaukums",0,M4Str,Normal,200,Spec,false,0);
    Flip(1);
    MatColTL(t=1,-255,"Vien. cena",0,M45Val,Normal,0,Price,true,0);
    MatColTL(t,-165,"Atlaide %",0,M41Val,Normal,0,vRebate,true,0);
    MatCol(t,-110,"Statuss",0,Statuss,false,0);
    Flip(2);
    MatColTL(t,-455,"Sāk. dat.",0,M4Date,Normal,0,ServStartDate,false,PasteCurDate);
    MatColTL(t,-375,"Beigu dat.",0,M4Date,Normal,0,ServEndDate,false,PasteCurDate);
    MatCol(t,-295,"Daudz",0,Quant,false,0);
    MatCol(t,-215,"Lauks",0,FieldCode,false,FlatFieldCodeSClass);
    MatCol(t,-135,"Koef",0,QtyCoef,false,0);
    MatCol(t,-75,"Uzkrāj.",0,PeriodCode,false,0);
    InsertRowTest;
    DeleteRowTest;
    EndMatrix;
    vs = 20;
    v = 18; VTab(-35,v,-16,v+vs,ToolFlip,1,"A");
    v = v + vs; VTab(-35,v,-16,v+vs,ToolFlip,2,"B");
    if cofieldcnt>0 then begin
      cofieldcnt = CountCOFields(false);
      Tile(tilenr,255 + cofieldcnt * 20,false,"3",SerNr); tilenr = tilenr + 1;
      StaticText(140,20,"(*) - Ievietot vērtības ar taustiņu kombināciju CTRL + F",false);
      vs = 20; h=120; h3=360; h4=540;
      if cofieldcnt>0 then begin
        ShowCOFields(23,140,420);
      end;
    end;

    Tile(tilenr,70,false,"4",FrRate); tilenr = tilenr + 1;
    vs = 20;
    EditField(h=110,v=6,400,"Rēķina nos. adrese",Normal,InvDelAddress,false,0);
    EditField(h,v+=vs,250,"E-pasts",Normal,eMail,false,0);
    EditField(430,v,80,"Datums",Normal,MailDate,false,PasteCurDate);
    EditField(h,v+=vs,250,"Papildus E-pasts 1",Normal,OBS_eMail1,false,0);
    EditField(h,v+=vs,250,"Papildus E-pasts 2",Normal,OBS_eMail2,false,0);
    EditField(h,v+=vs,250,"Papildus E-pasts 3",Normal,OBS_eMail3,false,0);
    EditField(h,v+=vs,250,"Papildus E-pasts 4",Normal,OBS_eMail4,false,0);
    EditField(h,v+=vs,250,"Papildus E-pasts 5",Normal,OBS_eMail5,false,0);
    EditField(h,v+=vs,120,"Banka",Normal,AccOperator,false,BankSClass);
    EditField(410,v,-20,"Bankas konts",Normal,BankAccount,false,0);
    
    CheckBox(h=400,v=56,0,"Rēķini e-pastos",InvToEmail);
    CheckBox(h,v+=16,0,"Nedrukāt rēķinus",DoNotPrintInv);
    
    Tile(tilenr,70,false,"5",FrRate); tilenr = tilenr + 1;
    vs = 20;
    EditField(h=110,v=6,50,"Valūta",Normal,CurncyCode,false,CurncyCodeSClass);
    EditField(295,v,50,"Kurss",Normal,FrRate,true,0);
    EditField(h3=360,v,50,":",Normal,ToRateB1,true,0);
    StaticText(h3+60,v+12,"Bāzes valūta 1",false);
    EditField(h,v+=vs,50,"Bāzes valūta 1",Normal,BaseRate1,true,0);
    EditField(h3,v,50,":",Normal,ToRateB2,true,0);
    StaticText(h3+60,v+12,"Bāzes valūta 2",false);
    EditField(h,v+=vs,50,"Bāzes valūta 2",Normal,BaseRate2,true,0);

    Tile(tilenr,130,false,"6",ContractNr); tilenr = tilenr + 1;
    h = 20; h2 = 90; vs = 20;
    EditField(140,v=6,150,"Pielikuma nr.",Normal,AttachNr,false,0);
    EditField(140,v+=vs,100,"Persona ar ko slēdz",Normal,CustCode2,false,CUSClass);
    EditField(360,v,-180,"Nosaukums",ViewOnly,CustName2,false,0);
    
    EditField(h,v+=vs,-20,"",Normal,Comment1,false,0);
    EditField(h,v+=vs,-20,"",Normal,Comment2,false,0);
    EditField(h,v+=vs,-20,"",Normal,Comment3,false,0);
    EditField(h,v+=vs,-20,"",Normal,Comment4,false,0);
    EditField(h,v+=vs,-20,"",Normal,Comment5,false,0);

    SpecialMenu("Klienta statuss",'e',0,"NAContractStatusCUDsm");
    SpecialMenu("Atvērt līguma lauku",'F',7,"OpenChCOFieldSm");
    SpecialMenu("Atvērt soda procentu",'s',10,"NewIntPercNAContractDsm");
    SpecialMenu("Mainīt klientu rēķinos un maksajumos",'X',14,"ChangeCustNAContractDsm");
  EndWindow;

return;
end;

window ChCOFieldWClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,vs,v;

  WindowBegin("Atvērt līguma lauka vērtības",ChCOFieldWClass,CGother,RcType);
    SetWRect(100,100,420,160);
    UseView(RcVc);
    h = 80;
    vs = 20;
    v = 12;
    EditField(h,v,100,"Lauks",Normal,f2,false,COFieldCodeSClass);
    HalPushButton(h+130,v-5,h+230,v+15,"OpenCOField","Atvērt");
  EndWindow;

  return;
end;

window BuildDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real x,h,h1,hl,h2,v,v2,vm,vs;
  string 255 label;
  integer FlatFieldCnt,TileNr;
  record BFlatFieldSetBlock BFlatFieldSetBlr;
  record BuildFieldSetBlock BuildFieldSetBlr;
  boolean buildfieldf,buildflatfieldf;

  BlockLoad(BuildFieldSetBlr);
  BlockLoad(BFlatFieldSetBlr);
  buildfieldf = (MatRowCnt(BuildFieldSetBlr)>0);
  buildflatfieldf = (MatRowCnt(BFlatFieldSetBlr)>0);

  WindowBegin("Ēka",BuildDClass,CGview,-);
    DynamicWindow;
    SetWRect(64,80,930,590);
    UseView(BuildVc);
    sizeable(0,0,0,0);
    h=130; h1=320; h2=450;
    vs = 20;
    Tile(0,150,false,"",Address);
    EditField(h,v=12,100,"Kods",St_i,Code,false,0);
    EditField(h1,v,240,"Adrese",ViewOnly,Address,false,0);
    EnterSkip(RegisterNo);
    CheckBox(h1+320,v,0,"Neaktīva",Closedf);
    CheckBox(h1+320,v+16,0,"Rēķini uz ēku",InvToBuild);
    EditField(h,v+=vs,100,"Kadastra Nr.",Normal,RegisterNo,false,0);
    EditField(h1,v,100,"Korpusa Nr.",Normal,BlockNo,false,0);
    EditField(h,v+=vs,100,"Klasifikācija",Normal,Classification,false,MSClassSClass);
    EditField(h1,v,100,"Objekti",Normal,Objects,false,ObjSClass);
    EditField(h1+370,v,60,"Kārtošanas Nr.",Normal,IntBuildNo,false,0);
    EditField(h,v+=vs,100,"Datums",Normal,BDate,false,PasteCurDate);
    EditField(h1,v,240,"Ēkas nosaukums",Normal,BuildName,false,0);
    EditField(h1+370,v,60,"ISP kontrolieris",Normal,ISPController,false,0);
    EditField(h1+370,v+=vs,60,"Kārt. burts",Normal,IntBuildChr,false,0);
    TileNr = 1;
    TileButton(TileNr,"Adrese"); TileNr = TileNr + 1;
    TileButton(TileNr,"Vispārējā info"); TileNr = TileNr + 1;
    if buildflatfieldf then begin
      TileButton(TileNr,"Telpu lauki"); TileNr = TileNr + 1;
    end;
    if buildfieldf then begin
      TileButton(TileNr,"Ēku lauki"); TileNr = TileNr + 1;
    end;
    TileButton(TileNr,"Rēķina komentāri");

    TileNr = 1;
    Tile(TileNr,100,false,"",Street); TileNr = TileNr + 1;
    v = 10;
    EditField(h,v,290,"Iela",Normal,Street,false,AddressFieldSClass);
    EditField(h1+200,v,80,"Mājas nr.",Normal,BuildNr,false,AddressFieldSClass);
    EditField(h,v+=vs,100,"Pilsēta",Normal,City,false,AddressFieldSClass);
    EditField(h1,v,100,"Pagasts",Normal,RuralTer,false,AddressFieldSClass);
    EditField(h1+200,v,80,"Novads",Normal,Municipality,false,AddressFieldSClass);
    EditField(h,v+=vs,100,"Pasta kods",Normal,PostalCode,false,AddressFieldSClass);
    EditField(h1,v,100,"Valsts",Normal,Contry,false,CountrySClass);
    Tile(TileNr,100,false,"",BlockNo);  TileNr = TileNr + 1;
    v = 10;
    EditField(h,v,100,"Ēkas tips",Normal,HouseType,false,BuildTypeSClass);
    EditField(h2,v,100,"Stāvu skaits",Normal,Floors,false,0);
    EditField(h,v+=vs,100,"Priv. Statuss",Normal,PrivStat,false,SetSClass);
    EditField(h2,v,100,"Īpašnieka tips",Normal,OwnerType,false,SetSClass);
    EditField(h,v+=vs,100,"Celšanas gads",Normal,BuildYear,false,0);
    EditField(h2,v,100,"Zemes īpašnieki",Normal,LandOwner,false,SetSClass);
    EditField(h,v+=vs,100,"Bāze",Normal,Base,false,0);
    EditField(h2,v,50,"Papildus dienas līgumsoda aprēķiniem",Normal,MSIntAddDays,false,0);
    EditField(h2,v+=vs,250,"Skait. nolasījuma lapas e-pasts",Normal,CountResInpEmail,false,0);
    ShowBFlatFields(tilenr,BFlatFieldSetBlr,180,510);
    ShowBuildFields(tilenr,BuildFieldSetBlr,180,510,"(*) - Ievietot vērtības ar taustiņu kombināciju CTRL + F");
    Tile(TileNr,120,true,"",InvComment);
    vs = 20; TileNr = TileNr + 1;
    EditField(h,v=20,-50,"Rēķina komentārs 1",Normal,InvComment,false,0);
    EditField(h,v+=vs,-50,"Rēķina komentārs 2",Normal,InvComment2,false,0);
    EditField(h,v+=vs,-50,"Rēķina komentārs 3",Normal,InvComment3,false,0);
    SpecialMenu("Mainīt skaitītājus",'m',1,"ChangeBuildCountersm");
    SpecialMenu("Skaitītāju rādījumi",'s',2,"BuildCounterRessm");
    SpecialMenu("Ēkas statuss",'r',3,"BuildStatsm");
    SpecialMenu("Atvērt lauku vērtības",'F',4,"OpenChBuildFieldSm");
    SpecialMenu("Ēkas statusa atskaite",' ',11,"BuildStatusRnSm");
    SpecialMenu("Īpasnieki",' ',16,"OpenBuildOwnersSm");
  EndWindow;

  return;
end;

window BuildLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ēkas",BuildLClass,CGmlist,-);
    SpawnClass(BuildDClass);
    SetWRect(20,80,700,298);
    Sizeable(-1,-1,0,0);
    UseView(BuildVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlColKey(100,100,"Adrese",Address,false,Address);
    // RlColKey(-320,-320,"Kadastra Nr.",RegisterNo,false,RegisterNo);
    // RlCol(-200,-200,"Ēkas tips",HouseType,false);
    // RlCol(-100,-100,"Stāvi",Floors,false);
    // Calculatedcolumn(-50,-50,"Platība","BuildLClassTotArea",false);
    RlColKey(350,350,"Ēkas nosaukums",BuildName,false,BuildName); //-320

    SearchField("Meklēt");
    SpecialMenu("Meklēt",'F',1,"SearchBuildVcLsm");
    SpecialMenu("Mainīt skaitītājus",'m',1,"ChangeBuildCountersm");
    SpecialMenu("Skaitītāju rādījumi",'s',2,"BuildCounterRessm");
    SpecialMenu("Ēkas statuss",'r',3,"BuildStatsm");
    // SpecialMenu("Piegādātāju līgumi",' ',4,"BuildSuppContrRepsm");
    // SpecialMenu("Pakalpojumu un ien. rēķinu sasaite",'i',5,"BuildVILinksm");
    // SpecialMenu("Mājas lietas",'',6,"BuildDocFromBuilddsm");
  EndWindow;

  return;
end;

window BuildSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot ēku",BuildSClass,CGslist,-);
    SpawnClass(BuildDClass);
    SetWRect(20,80,760,298);
    Sizeable(-1,-1,0,0);
    UseView(BuildVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlColKey(100,100,"Adrese",Address,false,Address);
    RlColKey(-330,-330,"Kadastra Nr.",RegisterNo,false,RegisterNo);
    RlCol(-230,-230,"Ēkas tips",HouseType,false);
    RlCol(-130,-130,"Stāvi",Floors,false);
    RlCol(-70,-70,"Platība",TotArea,true);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window BuildTypeLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ēku tipi",BuildTypeLClass,CGmlist,-);
    SpawnClass(BuildTypeDClass);
    SetWRect(20,80,490,298);
    Sizeable(-1,-1,0,0);
    UseView(BuildTypeVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlColKey(90,90,"Apraksts",Description,false,Description);
    RlCol(290,290,"Ekspl. ilgums",WorkYears,false);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window BuildTypeSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot ēku tipu",BuildTypeSClass,CGslist,-);
    SpawnClass(BuildTypeDClass);
    SetWRect(20,80,490,298);
    Sizeable(-1,-1,0,0);
    UseView(BuildTypeVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlColKey(90,90,"Apraksts",Description,false,Description);
    RlCol(290,290,"Ekspl. ilgums",WorkYears,false);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window BuildTypeDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,v,vs;

  WindowBegin("Ēku tips",BuildTypeDClass,CGview,-);
    SetWRect(64,80,580,200);
    UseView(BuildTypeVc);
    h=120; h1=320; h2=450;
    vs = 20;
    EditField(h,v=12,100,"Kods",Normal,Code,false,0);
    EditField(h1,v,100,"Ekspl. ilgums",Normal,WorkYears,true  ,0);
    EditField(h,v+=vs,-80,"Apraksts",Normal,Description,false,0);
    EditField(h,v+=vs,-80,"Komentārs",Normal,Comment,false,0);
  EndWindow;

  return;
end;

window BuildGroupSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot ēku grupu",BuildGroupSClass,CGslist,-);
    SpawnClass(BuildGroupDClass);
    SetWRect(20,80,400,298);
    Sizeable(-1,-1,0,0);
    UseView(BuildGroupVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlColKey(110,110,"Komentārs",Comment,false,Comment);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window BuildGroupLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ēku grupas",BuildGroupLClass,CGmlist,-);
    SpawnClass(BuildGroupDClass);
    SetWRect(20,80,400,298);
    Sizeable(-1,-1,0,0);
    UseView(BuildGroupVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlColKey(110,110,"Komentārs",Comment,false,Comment);
    SearchField("Meklēt");
    SpecialMenu("Skaitītāju rādījumi",'s',1,"BuildGroupCounterRessm");
  EndWindow;

  return;
end;

window BuildGroupDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,vs,v,vm;

  WindowBegin("Ēku grupa",BuildGroupDClass,CGview,-);
    SetWRect(64,80,320,280);
    Sizeable(-1,-1,0,0);
    UseView(BuildGroupVc);
    h=100; h2=280; vs = 20;
    EditField(h,v=12,60,"Kods",Normal,Code,false,0);
    EditField(h,v+=vs,-40,"Komentārs",Normal,Comment,false,0);
    EditField(h,v+=vs,-40,"Klasifikācijas",Normal,Classification,false,MSClassSClass);
    EditField(h,v+=vs,80,"Sākuma datums",Normal,StartDate,false,PasteCurDate);
    EditField(h+200,vm=v,80,"Beigu datums",Normal,EndDate,false,PasteCurDate);
    EditField(h,v+=20,80,"ISP kontrolieris",Normal,ISPController,false,0);
    CheckBox(h+350,v=vm,0,"Aukstā ūdens starpību aprēķini",ColdWaterDiffCalc);
    CheckBox(h+350,v+=16,0,"Karstā ūdens starpību aprēķini",HotWaterDiffCalc);
    MatrixBegin(4,v+=50,-50,-19,-,199);
    MatCol(1,h=25,"Ēka",0,RowCode,false,BuildSClass);
    MatCol(1,120,"Komentārs",0,RowComment,false,0);
    EndMatrix;
    SpecialMenu("Mainīt skaitītāju",'m',3,"MSChangeCountBuildGroupMnSm");
    SpecialMenu("Skaitītāju rādījumi",'s',1,"BuildGroupCounterRessm");
  EndWindow;

  return;
end;

window COFieldSetTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,vs,v;

  WindowBegin("Līgumu lauku uzstādījumi",COFieldSetTClass,CGHbl,HBlRecType);
    SetBlid(COFieldSetBlock);
    SetWRect(20,80,340,480);
    h = 8; v = 26; h1=24;
    MatrixBegin(h,v,-31,-20,-,20);
    MatCol(1,h1,"Lauks",0,FieldCode,false,COFieldCodeSClass);
    MatCol(1,h1+100,"Nosaukums",0,Name,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window COFieldCodeLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Līgumu lauki",COFieldCodeLClass,CGmlist,-);
    SpawnClass(COFieldCodeDClass);
    SetWRect(20,80,460,300);
    UseView(COFieldCodeVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Lauks",FieldCode,false,FieldCode);
    RlColKey(100,100,"Īsais nosaukums",ShortName,false,ShortName);
    RlColKey(200,200,"Nosaukums",Name,false,Name);
    SearchField("Meklēt");
  EndWindow;

return;
end;

window COFieldCodeSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,vs,v;

  WindowBegin("Līgumu lauki",COFieldCodeSClass,CGslist,-);
    SpawnClass(COFieldCodeDClass);
    SetWRect(20,80,460,300);
    UseView(COFieldCodeVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Lauks",FieldCode,false,FieldCode);
    RlColKey(100,100,"Īsais nosaukums",ShortName,false,ShortName);
    RlColKey(200,200,"Nosaukums",Name,false,Name);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window COFieldCodeDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,vs,v;

  WindowBegin("Līgumu lauks",COFieldCodeDClass,CGview,-);
    SetWRect(64,80,520,200);
    UseView(COFieldCodeVc);
    h = 80;
    h2 = h + 200;
    vs = 20;
    v = 12;
    EditField(h,v,90,"Lauks",Normal,FieldCode,false,0);
    EditField(h2,v,100,"Īsais nosaukums",Normal,ShortName,false,0);
    EditField(h,v+=vs,300,"Nosaukums",Normal,Name,false,0);
    //EditField(h,v+=vs,70,"Tips",Normal,FieldType,false,SetSClass);
    //CheckBox(h2,v,0,"Vidējais aprēķins",CalcAvg);
    //EditField(h,v+=vs,70,"Minimums",Normal,Minimum,false,0);
  EndWindow;

  return;
end;

window COFieldLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,vs,v;

  WindowBegin("Līgumu lauku vērtības",COFieldLClass,CGmlist,-);
    SpawnClass(COFieldDClass);
    SetWRect(20,80,300,400);
    Sizeable(-1,-1,0,0);
    UseView(COFieldVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Līgums",COSer,false,COSer);
    RlColKey(100,100,"Lauks",FieldCode,false,FieldCode);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window COFieldDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,vs,v;

  WindowBegin("Līgumu lauka vērtības",COFieldDClass,CGview,-);
    SetWRect(64,80,650,350);
    UseView(COFieldVc);
    h = 80;
    vs = 20;
    v = 12;
    EditField(h,v,80,"Lauks",Normal,FieldCode,false,COFieldCodeSClass);
    EditField(h+140,v,100,"Līgums",Normal,COSer,false,NAContractSClass);
    MatrixBegin(4,v+=50,-50,-19,-,399);
    MatCol(1,32,"Datums",0,StartDate,false,PasteCurDate);
    MatCol(1,100,"Vērtība",0,Value,false,0);
    MatCol(1,200,"Komentārs",0,Comment,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window MSConstWClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Konstantes",MSConstWClass,CGHbl,-);
    SetWRect(20,80,620,410);
    SetBlid(MSConstBlock);
    MatrixBegin(20,20,-50,-7,-,199);
    MatCol(1,24,"Kods",0,Code,false,0);
    MatCol(1,100,"Summa",0,Sum,true,0);
    MatCol(1,180,"No",0,SDate,true,PasteCurDate);
    MatCol(1,270,"Līdz",0,EDate,true,PasteCurDate);
    MatCol(1,360,"Komentārs",0,Comment,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window CountResSerTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Numuru sērijas - Skaitītāju rādījumi",CountResSerTClass,CGHbl,HBlRecType);
  SetBlid(CountResSerBlock);
  TSERWNT_LAT;
  EndWindow;

  return;
end;

window CountManTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("Skaitītāju ražotāji",CountManTClass,CGHbl,HBlRecType);
    SetBlId(CountManBlock);
    SetWRect(20,80,250,400);
    Sizeable(-1,-1,0,0);
    h = 8;
    v = 20;
    MatrixBegin(h,v,-41,-10,-,200);
    MatCol(1,24,"Nosaukums",0,Name,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window CountManSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot skaitītāja ražotāju",CountManSClass,CGother,HBlRecType);
    SetWRect(20,80,250,400);
    Sizeable(-1,-1,0,0);
    StringList(9,9,-40,-10);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window CountInstOrgTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Skaitītāju uzstādīšanas organizācijas",CountInstOrgTClass,CGHbl,HBlRecType);
    SetBlId(CountInstOrgBlock);
    SetWRect(20,80,250,400);
    Sizeable(-1,-1,0,0);
    MatrixBegin(8,20,-41,-10,-,200);
    MatCol(1,24,"Nosaukums",0,Name,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window CountInstOrgSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot organizāciju",CountInstOrgSClass,CGother,HBlRecType);
    SetWRect(20,80,250,400);
    Sizeable(-1,-1,0,0);
    StringList(9,9,-40,-10);
  EndWindow;

  return;
end;

window CalcServicePlanSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Aprēķinu formulas",CalcServicePlanSClass,CGslist,-);
    SpawnClass(CalcServicePlanDClass);
    SetWRect(74,80,509,298);
    Sizeable(-1,-1,0,0);
    UseView(CalcServicePlanVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlCol(81,81,"Nosaukums",Name,false);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window CalcServicePlanLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Aprēķinu formulas",CalcServicePlanLClass,CGmlist,-);
    SpawnClass(CalcServicePlanDClass);
    SetWRect(74,80,509,298);
    Sizeable(-1,-1,0,0);
    UseView(CalcServicePlanVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlCol(81,81,"Nosaukums",Name,false);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window CalcServicePlanDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Aprēķina formula",CalcServicePlanDClass,CGview,-);
    SetWRect(64,80,579,380);
    Sizeable(-1,-1,0,0);
    UseView(CalcServicePlanVc);
    v = 6; vs = 20; h = 100;
    EditField(h,v, 60,"Kods",Normal,Code,false,0);
    EditField(h+150,v,-200,"Nosaukums",Normal,Name,false,0);
    EditField(-100,v,-70,"Atdal.",Normal,Delimiter,false,0);
    MatrixBegin(4,v+=40,-32,-20,-,299);
    MatCol(1,32,"Veids",0,FType,false,SetSClass);
    MatCol(1,92,"Kods",0,FCode,false,0);
    MatCol(1,160,"Formula",0,Formula,false,0);
    MatCol(1,-180,"Komentārs",0,Comment,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window ServCalcValueLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Aprēķinātās vērtības",ServCalcValueLClass,CGmlist,-);
    SpawnClass(ServCalcValueDClass);
    SetWRect(20,80,950,298);
    Sizeable(-1,-1,0,0);
    UseView(ServCalcValueVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Nr.",SerNr,false,SerNr);
    RlColKey(50,50,"Datums",TransDate,false,TransDate);
    RlColKey(180,180,"Kods",Code,false,Code);
    RlColKey(290,290,"Komentārs",Comment,false,Comment);
    RlColKey(-400,-400,"Sāk. datums",StartDate,false,StartDate);
    RlColKey(-330,-330,"Beigu datums",EndDate,false,EndDate);
    RlColKey(-260,-260,"Apr.formula",CalcFormula,false,CalcFormula);
    RlColKey(-170,-170,"Vērtības kods",FieldCode,false,FieldCode);
    RlColKey(-80,-80,"Vērtība",CalcVal,false,CalcVal);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window ServCalcValueDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,v,vs;

  WindowBegin("Aprēķinātā vērtība",ServCalcValueDClass,CGview,-);
    SetWRect(64,80,660,240);
    UseView(ServCalcValueVc);
    Sizeable(-1,-1,0,0);
    ActiveFieldOnNew("BuildCode");
    h=110; h1=320; h2=300; h3=490; vs=20;
    EditField(h,v=12,100,"Numurs",ViewOnly,SerNr,false,0);
    EditField(h2,v,100,"Datums",ViewOnly,TransDate,false,PasteCurDate);
    EditField(h,v+=vs,70,"Ēka",Normal,BuildCode,false,BuildSClass);
    EditField(h2,v,70,"Ēku gurpa",Normal,BuildGroupCode,false,BuildGroupSClass);
    EditField(h3,v,70,"Telpu gurpa",Normal,FlatGroupCode,false,FlatGroupSClass);
    EditField(h,v+=vs,-20,"Komentārs",Normal,Comment,false,0);
    EditField(h,v+=vs,70,"Sākuma datums",Normal,StartDate,false,PasteCurDate);
    EditField(h2,v,70,"Beigu datums",Normal,EndDate,false,PasteCurDate);
    EditField(h,v+=vs,70,"Apr. formula",Normal,CalcFormula,false,0);
    EditField(h2,v,70,"Vērtības kods",Normal,FieldCode,false,0);
    EditField(h3,v,70,"Vērtība",Normal,CalcVal,true,0);
  EndWindow;

  return;
end;

window FlatsLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Telpas",FlatsLClass,CGmlist,-);
    SpawnClass(FlatsDClass);
    SetWRect(20,80,760,298);
    Sizeable(-1,-1,0,0);
    UseView(FlatsVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",FlatCode,false,FlatCode);
    RlColKey(84,84,"Vec.kods",UserStr1,false,UserStr1);
    RlColKey(140,140,"Ēka",Code,false,Code);
    RlColKey(220,220,"Adrese",Address,false,Address);
    RlColKey(-350,-350,"Dzīvokļa Nr.",FlatNo,false,FlatNo);
    // RlColKey(-290,-290,"Klients",CustCode,false,CustCodeSimple);
    RlColKey(-290,-290,"Telpas nosaukums",FlatName,false,FlatName);
    RlCol(-110,-110,"Stāvs",Floor,false);
    SearchField("Meklēt");
    SpecialMenu("Meklēt",'F',1,"SearchFlatVcLsm");
  EndWindow;

  return;
end;

window FlatsSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot telpas kodu",FlatsSClass,CGslist,-);
    SetWRect(20,80,770,298);
    Sizeable(-1,-1,0,0);
    UseView(FlatsVc);
    SpawnClass(FlatsDClass);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",FlatCode,false,FlatCode);
    RlColKey(84,84,"Vec.kods",UserStr1,false,UserStr1);
    RlColKey(140,140,"Ēka",Code,false,Code);
    RlColKey(220,220,"Adrese",Address,false,Address);
    RlColKey(-400,-400,"Dzīvokļa Nr.",FlatNo,false,FlatNo);
    RlCol(-330,-330,"Telpu tips",RoomType,false);
    RlCol(-260,-260,"Stāvs",Floor,false);
    RlCol(-150,-150,"Reģ. Dati",RegisterNo,true);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window FlatsDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real x,h,h1,hl,h2,v,v2,vm,vs;
  string 255 label;
  
  WindowBegin("Telpa",FlatsDClass,CGview,-);
    DynamicWindow;
    SetWRect(64,80,680,400);
    UseView(FlatsVc);
    Sizeable(-1,-1,0,0);
    h=120; h1=320; h2=450;
    vs = 20;
    Tile(0,132,false,"",Address); //116
    EditField(h,v=12,100,"Ēka",Normal,Code,false,BuildSClass);
    EditField(h2-80,v,100,"Telpas kods",Normal,FlatCode,false,0);
    EditField(h2+120,v,40,"Kārtošanas Nr.",Normal,IntFlatNo,false,0);
    EditField(h,v+=vs,200,"Adrese",Normal,Address,false,0);
    EditField(h2-80,v,100,"Dz.Nr.",Normal,FlatNo,false,0);
    EditField(h2+120,v,40,"Paraksts",Normal,Signature,false,UserSClass);
    EditField(h,v+=vs,100,"Kadastra Nr.",Normal,RegisterNo,false,0);
    EditField(h2-80,v,100,"Nodalījums",Normal,Partition,false,0);
    EditField(h2+120,v,40,"ISP kontrolieris",Normal,ISPController,false,0);
    EditField(h,v+=vs,200,"Telpas nosaukums",Normal,FlatName,false,0);
    TileButton(1,"Vispārējā info");
    TileButton(2,"Telpas lauki");
    Tile(1,120,false,"1",PrivStat);
    v = 10;
    EditFieldTL(h,v,120,"Priv. statuss",M4Set,Normal,1003,PrivStat,false,SetSClass); //changed to TL BBS VG 2007/12/07
    EditField(h2,v,130,"Telpu tips",Normal,RoomType,false,SetSClass);
    EditField(h,v+=vs,100,"Apdares līmenis",Normal,RoomLevel,false,SetSClass);
    EditField(h2,v,100,"Stāvs",Normal,Floor,false,0);
    EditField(h,v+=vs,100,"Mājas vecākais",Normal,OverseerType,false,SetSClass);
    EditField(h,v+=vs,100,"Lodžiju skaits",Normal,NoOfBalc2,false,0);
    EditField(h2,v,100,"Radiatoru skaits",Normal,BatNr,false,0);
    EditField(h,v+=vs,200,"Klasifikācija",Normal,Classification,false,MSClassSClass);
    EditField(h2,v,100,"Objekti",Normal,Objects,false,ObjSClass);
    EditField(h,v+=vs,-300,"Rēķina komentārs",Normal,InvComment,false,0);
    EditField(h2,v,100,"Vecais Nr.",Normal,OldNr,false,0);

    ShowFlatFields("(*) - Ievietot vērtības ar taustiņu kombināciju CTRL + F");

    SpecialMenu("Atvērt līgumu",' ',1,"OpenMSFlatContractsm");
    SpecialMenu("Skaitītāju rādījumi",'r',2,"CounterResRnsm");
    SpecialMenu("Mainīt skaitītāju",'m',3,"MSChangeCount2MnSm");
    SpecialMenu("Pēdējais rēķins",'p',5,"OpenLastIVSm");
    SpecialMenu("Neapmaksātie rēķini",'n',6,"ARRnSm");
    SpecialMenu("Atvērt lauku vērtības",'F',8,"OpenChFlatFieldSm");
    SpecialMenu("Telpas statusa atskaite",' ',11,"FlatsStatusRnSm");
    SpecialMenu("Īpašnieki",' ',16,"OpenOwnersSm");
  EndWindow;

  return;
end;

window FlatCountersLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real v;

  WindowBegin("Skaitītāji",FlatCountersLClass,CGmlist,-);
    DynamicWindow;
    SpawnClass(FlatCountersDClass);
    SetWRect(20,80,790,298);
    Sizeable(-1,-1,0,0);
    UseView(FlatCountersVc);
    DrawSelectionButtonsFlatCounters(5,5,100,20,"Telpas","Ēkas","Ēku grupas","Telpu grupas","Visi","Slēgtie");
    v = 25;
    RecordList(4,v+=20,-21,-39);
    RlColKey(4,4,"Skait. ID.",SerNr,false,WinSerNr);
    RlCol(74,74,"Sl.",Closedf,false);
    RlColKey(94,94,"Skait. Nr.",CounterNo,false,WinCounterNo);
    RlColKey(200,200,"Telpas kods",FlatCode,false,WinFlatCode);
    RlCol(270,270,"Secība",FlatCode,false);
    RlColKey(330,330,"Ēka/Grupa",CodeField,false,WinCodeIndex);
    RlColKey(410,410,"Adrese",Address,false,WinAddress);
    // RlCol(-280,-280,"Galv. sk.",MainCounter,false);
    RlCol(-200,-200,"Dzīv.",FlatNo,false);
    RlColKey(-160,-160,"Tips",CounterType,false,WinCounterType);
    RlCol(-120,-120,"Vieta",Location,false);
    SearchField("Meklēt");
    SpecialMenu("Rādījumi",'',0,"CountResRnFlatCountersLsm");
    SpecialMenu("Veidot rādījumu",'',1,"CreateCountResLSm");
  EndWindow;

  return;
end;

window FlatCounters2SClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot skaitītāju",FlatCounters2SClass,CGslist,-);
    SpawnClass(FlatCountersDClass);
    SetWRect(20,80,720,298);
    Sizeable(-1,-1,0,0);
    UseView(FlatCountersVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Skait. ID.",SerNr,false,BuildSerNr);
    RlColKey(74,74,"Skait. Nr.",CounterNo,false,BuildCounterNo);
    RlColKey(180,180,"Telpas kods",FlatCode,false,FlatCode);
    RlColKey(270,270,"Secība",FlatCode,false,EnterSortOrder);
    RlColKey(330,330,"Ēka/Grupa",CodeField,false,CodeIndex);
    RlColKey(410,410,"Adrese",Address,false,Address);
    RlColKey(-200,-200,"Dzīv.",FlatNo,false,FlatNo);
    RlColKey(-160,-160,"Tips",CounterType,false,CounterType);
    RlColKey(-120,-120,"Vieta",Location,false,Location);
    SearchField("Meklēt");
    SpecialMenu("Rādījumi",'',0,"CountResRnFlatCountersLsm");
  EndWindow;

  return;
end;

window FlatCountersSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot skaitītāju",FlatCountersSClass,CGslist,-);
    // SpawnClass(FlatCountersDClass);
    SetWRect(20,80,720,298);
    Sizeable(-1,-1,0,0);
    UseView(FlatCountersVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Skait. Nr.",CounterNo,false,BuildCounterNo);
    RlColKey(120,120,"Skait. ID.",SerNr,false,BuildSerNr);
    RlColKey(180,180,"Telpas kods",FlatCode,false,FlatCode);
    RlColKey(270,270,"Secība",FlatCode,false,EnterSortOrder);
    RlColKey(330,330,"Ēka/Grupa",CodeField,false,CodeIndex);
    RlColKey(410,410,"Adrese",Address,false,Address);
    RlColKey(-200,-200,"Dzīv.",FlatNo,false,FlatNo);
    RlColKey(-160,-160,"Tips",CounterType,false,CounterType);
    RlColKey(-120,-120,"Vieta",Location,false,Location);
    SearchField("Meklēt");
    SpecialMenu("Rādījumi",'',0,"CountResRnFlatCountersLsm");
  EndWindow;

  return;
end;

window HeadFlatCountersSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot galveno skaitītāju",HeadFlatCountersSClass,CGslist,-);
    SpawnClass(FlatCountersDClass);
    SetWRect(20,80,600,298);
    Sizeable(-1,-1,0,0);
    UseView(FlatCountersVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Skait. Nr.",CounterNo,false,HeadCounterNo);
    RlColKey(120,120,"Skait. ID.",SerNr,false,HeadCounterSerNr);
    RlColKey(180,180,"Adr. kods",Code,false,HeadCode);
    RlColKey(250,250,"Adrese",Address,false,HeadAddress);
    RlColKey(-160,-160,"Tips",CounterType,false,HeadCounterType);
    RlCol(-120,-120,"Vieta",Location,false);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window FlatCountersDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,v,vs,vm;

  WindowBegin("Skaitītājs",FlatCountersDClass,CGview,-);
    SetWRect(64,80,680,420);
    Sizeable(-1,-1,0,0);
    UseView(FlatCountersVc);
    h=100; h1=285; h2=460;
    vs = 20;
    Tile(0,110,false,"",CounterNo);
    EditField(h,v=12,100,"Skaitītāja ID",ViewOnly,SerNr,false,0);
    EditField(h1,v,100,"Līgums",Normal,Contract,false,NAContractSClass);
    EditField(h,v+=vs,100,"Skaitītāja Nr.",Normal,CounterNo,false,0);
    EditField(h1,v,100,"Telpa",Normal,FlatCode,false,FlatsSClass);
    EditField(h,v+=vs,100,"Ēka",Normal,Code,false,BuildSClass);
    EditField(h1,v,100,"Telpu grupa",Normal,FlatGroupCode,false,FlatGroupSClass);
    EditField(h2,v,100,"Ēku grupa",Normal,BuildGroupCode,false,BuildGroupSClass);
    EditField(h,v+=vs,285,"Adrese",Normal,Address,false,0);
    EditField(h2,v,20,"Nr",Normal,FlatNo,false,0);
    Tilebutton(1,"A");
    Tilebutton(2,"B");
    Tile(1,200,false,"",CounterType);
    EditField(h,vm=(v=12),100,"Skait. tips",Normal,CounterType,false,INSClass);
    ButtonFrame(h2=350,v+=10,120,3,"Atrašanās vieta");
    RadioButton(h2,v,1,0,"Pirms lielā skaitītāja",LocType);
    RadioButton(h2,v+=16,2,0,"Pēc lielā skaitītāja",LocType);
    RadioButton(h2,v+=16,0,0,"Cita",LocType);
    Checkbox(h2+200,vm,0,"Sūtīt uz AMR",SendToAMRf);
    Checkbox(h2+200,vm+vs,0,"Sūtīt uz NIP",SendToNIPf);
    Checkbox(h2+200,vm+(2*vs),0,"Kontrolskaitītājs",ControlCountf);
    EditField(h,v=(vm+vs),100,"Vecais ID",ViewOnly,OldCounterID,false,0);
    EditField(h,v+=vs,100,"Galv. skaitītājs",Normal,MainCounter,false,FlatCounters2SClass);
    EditField(h,v+=vs,200,"Ražotājs",Normal,Manufacture,false,CountManSClass);
    EditField(h,v+=vs,200,"Rūpnieciskais nr.",Normal,ManufactureNo,false,0);
    EditField(h,v+=vs,-50,"Komentārs",Normal,Comment,false,0);
    Checkbox(h,vm=(v+=30),0,"Slēgts",Closedf);
    Checkbox(h,v+=16,0,"Neskaitīt rādījumus",CountTypef);
    Checkbox(h,v+=16,0,"Bojāts",Damagef);
    Checkbox(h1,v=vm,0,"Nomainīts",Changed);
    Checkbox(h1,v+=16,0,"Neveidot vidējos rādījumus",DontCalcAvgCountRes);
    EditField(h1=h1+60,v+=vs,80,"Periods",Normal,AvgStartDate,false,PasteCurDate);
    EditField(h1+97,v,80,"-",Normal,AvgEndDate,false,PasteCurDate);
    Tile(2,230,false,"",Location);
//  EditField(h1,v,100,"Pak. tips",Normal,ServiceType,false,CounterTypeSClass);
    EditField(h,v=12,100,"Vieta",Normal,Location,false,0);
    EditField(h1=315,v,100,"Plombes Nr.",Normal,SealNo,false,0);
    EditField(h,v+=vs,100,"Sāk. rādījums 1",Normal,InitAmount,false,0);
    EditField(h1,v,100,"Sāk. rādījums 2",Normal,InitAmount2,false,0);
    EditField(h,v+=vs,100,"Uzst. datums",Normal,InstallDate,false,PasteCurDate);
    EditField(h1,v,100,"Uzst. organizācija",Normal,InstallOrg,false,CountInstOrgSClass);
    EditField(h1+160,v,-20,"Meistars",Normal,ExpertCode,false,ExpertSClass);
    EditField(h,v+=vs,100,"Derīgs līdz",Normal,ValidUntil,false,PasteCurDate);
    EditField(h1,v,100,"Brīd. datums",Normal,WarningDate,false,PasteCurDate);
//  EditField(h,v+=vs,100,"Iekš. brīdinājums",Normal,InternalWarnDate,false,PasteCurDate);
    EditField(h,v+=vs,100,"Koeficients",Normal,Coef,true,0);
    EditField(h1,v,100,"Korekcija",Normal,CorrAmount,true,0);
    EditField(h,v+=vs,100,"Pēdējā pārbaude",Normal,LastCheckDate,false,PasteCurDate);
    EditField(h1,v,100,"Pārbaudīja",Normal,OrgChecked,false,0);
    EditField(h,v+=vs,100,"Verif.datums",Normal,VerificationDate,false,PasteCurDate);
    EditField(h,v+=vs,100,"Noņemts",Normal,RemoveDate,false,PasteCurDate);
    EditField(h1,v,100,"Org. noņēma",Normal,OrgRemoved,false,0);
    SpecialMenu("Rādījumi",'',1,"CountResRnsm");
    // SpecialMenu("Apakšskaitītāji",'',2,"CounterListRnSm");
    // SpecialMenu("Atjaunot rādījumus",'',3,"UpdateCountResSm");
    SpecialMenu("Veidot rādījumu",'',4,"CreateCountResDSm");
    SpecialMenu("Mainīt skaitītāja tipu",'',5,"ChangeFlatCounterTypeDSm");
  EndWindow;

  return;
end;

window CountResLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Skaitītāju rādījumi",CountResLClass,CGmlist,-);
    SpawnClass(CountResDClass);
    SetWRect(20,80,850,298);
    Sizeable(-1,-1,0,0);
    UseView(CountResVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Numurs",SerNr,false,SerNr);
    RlColKey(74,74,"Skait. ID",FlatCounterSerNr,false,FlatCounterSerNr);
    RlColKey(170,170,"Skaitītāja Nr.",CounterNo,false,CounterNo);
    RlColKey(270,270,"Skait. tips",CounterType,false,CounterType);
    RlColKey(340,340,"Sāk. datums",StartDate,false,StartDate);
    RlColKey(420,420,"Beigu datums",EndDate,false,EndDate);
    RlColKey(500,500,"Ēka/Grupa",CodeField,false,CodeIndex);
    RlColKey(600,600,"Adrese",CounterAddr,false,CounterAddr);
    RlCol   (-150,-150,"Dzīvoklis",CounterFlat,false);
    RlColKey(-100,-100,"Telpa",FlatCode,false,FlatCode);
    RlCol   (-50,-50,"Daudz.",Amount,true);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window CountResDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,v,vs;

   WindowBegin("Skaitītāja rādījums",CountResDClass,CGview,-);
    SetWRect(64,80,640,420);
    UseView(CountResVc);
    ActiveFieldOnNew("FlatCode");
    h=120; h1=360; h2=450;
    vs = 20;
    Tile(0,110,false,"",CounterNo);  //90
    EnterSkip(StartDate);
    EditField(h,v=6,100,"Numurs",Normal,SerNr,false,TSerSClass);
    EditField(h1,v,100,"Reģ. Datums",Normal,RegDate,false,0);
    EditField(h,v+=vs,100,"Skait. numurs",Normal,CounterNo,false,FlatCountersSClass);
    EnterSkip(StartDate);
    EditField(h1,v,100,"Telpa",Normal,FlatCode,false,FlatsSClass);
    EditField(h,v+=vs,100,"Līgums",Normal,ContractNr,false,NAContractSClass);
    EditField(h1,v,100,"Skaitītāja ID",ViewOnly,FlatCounterSerNr,false,0);
    EditField(h,v+=vs,100,"Rādījuma tips",Normal,CountResType,false,CountResTypeSClass);
    EditField(h1-50,v,150,"Nosaukums",ViewOnly,CountResTypeName,false,0);
    EnterSkip(EndVal);
///  checkbox(h1,v+20,0,"Apstiprināt",OKFlag);
    TileButton(1,"Rādījums");
    TileButton(2,"Korekcija");
    Tile(1,70,true,"",StartDate);
    EditField(h-30,v=10,80,"Telpu grupa",Normal,FlatGroupCode,false,FlatGroupSClass);
    EditField(h1-100,v,80,"Ēku grupa",Normal,BuildGroupCode,false,BuildGroupSClass);
    EditField(h1+50,v,80,"Ēka",Normal,BuildCode,false,BuildSClass);
    EditField(h,v+=vs,100,"Skaitītāja Tips",ViewOnly,CounterType,false,0);
    EditField(h1,v,100,"Vieta",ViewOnly,Location,false,0);
    EditField(h,v+=vs,100,"Nodošanas datums",Normal,DelivDate,false,PasteCurDate);
    EditField(h,v+=vs+10,100,"Sākuma datums",Normal,StartDate,false,PasteCurDate);
    EnterSkip(EndVal);
    EditField(h1,v,100,"Sākuma rādījums",Normal,StartVal,false,0);
    EditField(h,v+=vs,100,"Beigu datums",Normal,EndDate,false,PasteCurDate);
    EditField(h1,v,100,"Beigu rādījums",Normal,EndVal,false,0);
    CheckBox(h1+110,v-34,0,"Namsaimnieks",VacFlag);
    // CheckBox(h1+110,v-34,0,"Vidējais",AverageFlag);
    // CheckBox(h1+110,v-16,0,"WEB",WebFlag);
    // CheckBox(h1+110,v+2,0,"Kontrolakts",ControlFlag);
    // CheckBox(h1+110,v+20,0,"Atskaite",RepFlag);
    // CheckBox(h1+110,v+38,0,"Prombūtne",VacFlag);
    // CheckBox(h1+110,v+56,0,"Tālrunis",PhoneFlag);
    EditField(h,v+=vs,100,"Galv. Skait.",ViewOnly,MainCounter,false,FlatCountersSClass);
    EditField(h1,v,100,"Saskaitīts",Normal,Amount,false,0);
    EditField(h,v+=vs,180,"Adrese",ViewOnly,CounterAddr,false,0);
    EditField(h1,v,50,"Dzīvoklis",ViewOnly,CounterFlat,false,0);
    Tile(2,70,true,"",Coef);
    h = 100;
    EditField(h,v=16,100,"Koeficients",Normal,Coef,true,0);
    EditField(h,v+=vs,100,"Korekcija",Normal,CorAmount,true,0);
    EditField(h,v+=vs,100,"Koriģ. daudzums",ViewOnly,InvAmount,true,0);
    EditField(h,v+=vs,-100,"Komentārs",Normal,Comment,false,0);
    // EditField(h1,v,100,"Daudz. pēc individ. koef.",Normal,RecalcAmount,false,0);
    // EditField(h,v+=vs,100,"Apakškaitītāji",Normal,DaughterAmount,true,0);
    // EditField(h1,v,100,"Daudz. pēc kopējā koef.",Normal,RecalcAmount2,false,0);
    // EditField(h,v+=vs,100,"Uzkrājums",Normal,ResAmount,true,0);
    // EditField(h1,v,100,"Jaunais uzkrājums",Normal,NextResAmount,false,0);
    // EditField(h,v+=vs,100,"Rēķina daudzums",Normal,InvAmount,true,0);
    // EditField(h1,v,100,"Koriģ. rēķ. daudzums",Normal,ToInvAmount,false,0);
    // EditField(h,v+=vs,100,"Bez skaitītājiem",Normal,TotalNoCounters,true,0);
    // CheckBox(h1,v+2,0,"Vidējais",AverageFlag);
    //CheckBox(h1,v+2,0,"WEB",WebFlag);
    //EditField(h1,v,100,"Korekcija",Normal,CorrAmount,false,0);
    // StaticText(20,v+=40,"* Daudz. pēc kopējā koef. - labojums pēc mājas galvenā skaitītāja",false);
    // StaticText(20,v+=15,"* Uzkrājums - iepriekšējā rādījuma ""Jaunais uzkrājums""",false);
    // StaticText(20,v+=15,"* Jaunais uzkrājums - atlikušais uzkrājums, pēc šī mēneša rādījumiem",false);
    // StaticText(20,v+=15,"* Rēķina daudzums - nepieciešams gadījumos, kad nav nodoti rādījumi",false);
    // StaticText(20,v+=15,"* Koriģ. rēķ. daudzums - rēķina daudzums, kuram pielietots uzkrājums, ja tāds ir",false);
    // Tile(3,100,true,"",ColdWaterLeakCnt);
    // h = 150; h1=400;
    // EditField(h,v=16,70,"AŪ noliešanu skaits",Normal,ColdWaterLeakCnt,true,0);
    // EditField(h1,v,70," AŪ noliešana (M3)",ViewOnly,ColdWaterLeak,true,0);
    // EditField(h,v+=vs,70,"KŪ noliešanu skaits",Normal,HotWaterLeakCnt,true,0);
    // EditField(h1,v,70,"KŪ noliešanas (M3)",ViewOnly,HotWaterLeak,true,0);
    // EditField(h,v+=vs,70,"Profilaktiskās noliešanas (M3)",Normal,PreventiveLeak,true,0);
    // EditField(h,v+=vs,70,"Komercnoliešanas (M3)",Normal,CommWaterLeak,true,0);
    // EditField(h,v+=vs,70," Noliešanas kopā (M3)",ViewOnly,TotalLeak,true,0);

    // SpecialMenu("Ievietot 3 mēnešu vidējo",'',0,"PutMissingQtySm");
  EndWindow;

  return;
end;

window ServicePlanLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Tarifi",ServicePlanLClass,CGmlist,-);
    SpawnClass(ServicePlanDClass);
    SetWRect(20,80,920,298);
    Sizeable(-1,-1,0,0);
    UseView(ServicePlanVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Number",SerNr,false,SerNr);
    RlColKey(84,84,"Gl.",GlobalServPlan,false,GlobalServPlan);
    RlColKey(105,105,"Datums",TransDate,false,TransDate);
    RlColKey(180,180,"Veids",ServType,false,ServType);
    RlCol   (260,260,"Apraksts",Comment,false);
    RlColKey(450,450,"Ēka/Grupa",CodeField,false,CodeIndex);
    RlColKey(540,540,"Adrese",Address,false,Address);
    RlCol   (-200,-200,"Sāk.Dat.",StartDate,false);
    RlCol   (-100,-100,"Beigu Dat.",EndDate,false);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window ServicePlanDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,v,vs;

  WindowBegin("Tarifi",ServicePlanDClass,CGview,-);
    SetWRect(64,80,720,420);
    UseView(ServicePlanVc);
    h=110; h1=320; h2=300;h3 = 490;
    vs = 20;
    EditField(h,v=12,100,"Numurs",Normal,SerNr,false,0);
    EditField(h2,v,100,"Datums",Normal,TransDate,false,PasteCurDate);
    EditField(h,v+=vs,100,"Pakalpojums",Normal,ServType,false,INSClass);
    EditField(h2,v,-50,"Apraksts",Normal,Comment,false,0);
    EditField(h,v+=vs,100,"Ēka",Normal,BuildCode,false,BuildSClass);
    EditField(h2,v,100,"Ēku grupa",Normal,BuildGroupCode,false,BuildGroupSClass);
    EditField(h2+170,v,-50,"Telpu gr.",Normal,FlatGroupCode,false,FlatGroupSClass);
    EditField(h,v+=vs,-50,"Komentārs",Normal,Address,false,0);
    EditField(h,v+=vs,100,"Sāk. datums",Viewonly,StartDate,false,PasteCurDate);
    EditField(h2,v,100,"Beigu Datums",Viewonly,EndDate,false,PasteCurDate);
    CheckBox(h2+170,v+2,0,"Globālais tarifs",GlobalServPlan);
    // MatrixBegin(4,v=136,-50,-19,-,200);
    MatrixBegin(4,v=136,-50,v+=200,-,200);
    MatCol(1,32,"Sākuma datums",0,StartDate,false,PasteCurDate);
    MatCol(1,120,"Beigu datums",0,EndDate,false,PasteCurDate);
    MatCol(1,204,"Plānots",0,PlanPrice,true,0);
    MatCol(1,284,"Faktiski",0,RealPrice,true,0);
    MatCol(1,-250,"Korekcija",0,Correction,true,0);
    MatCol(1,-180,"Statuss",0,DoneFlag,false,SetSClass);
    MatColTL(1,-100,"Koef.",0,M45Val,Normal,0,QtyCoef,false,SetSClass);
    endmatrix;
    InsertrowTest;
    DeleterowTest;
  EndWindow;

  return;
end;

window ServRecPlanSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot dalīto pakalpojumu",ServRecPlanSClass,CGslist,-);
    SpawnClass(ServRecPlanDClass);
    SetWRect(20,80,680,298);
    Sizeable(-1,-1,0,0);
    UseView(ServRecPlanVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Numurs",SerNr,false,SerNr);
    RlColKey(70,70,"Gl.",DoNotCheckRows,false,DoNotCheckRows);
    RlColKey(90,90,"Ēka/Ēku gr./Telpu gr.",CodeField,false,CodeIndex);
    RlColKey(200,200,"Komentārs",Address,false,Address);
    RlColKey(-290,-290,"Apr.formula",CalcServPlan,false,CalcServPlan);
    RlColKey(-220,-220,"Nosaukums",Description,false,Description);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window ServRecPlanLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Dalītie pakalpojumi",ServRecPlanLClass,CGmlist,-);
    SpawnClass(ServRecPlanDClass);
    SetWRect(20,80,780,298);
    Sizeable(-1,-1,0,0);
    UseView(ServRecPlanVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Numurs",SerNr,false,SerNr);
    RlColKey(70,70,"Gl.",DoNotCheckRows,false,DoNotCheckRows);
    RlColKey(90,90,"Ēka/Ēku gr./Telpu gr.",CodeField,false,CodeIndex);
    RlColKey(200,200,"Komentārs",Address,false,Address);
    RlColKey(490,490,"Apr.formula",CalcServPlan,false,CalcServPlan);
    RlColKey(560,560,"Nosaukums",Description,false,Description);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window ServRecPlanDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("Dalītais pakalpojums",ServRecPlanDClass,CGview,-);
    SetWRect(20,80,650,335);
    Sizeable(-1,-1,0,0);
    UseView(ServRecPlanVc);
    EditField(h=100,v=6,95,"Numurs",Normal,SerNr,false,0);
    EditField(h+200,v,100,"Datums",Normal,TransDate,false,PasteCurDate);
    CheckBox(h+350,v,0,"Tarifs izveidots",ServPlanMade);
    EditField(h,v+=20,100,"Apr.formula",Normal,CalcServPlan,false,CalcServicePlanSClass);
    EditField(h+200,v,-50,"Nosaukums",Normal,Description,false,0);
    EditField(h,v+=20,100,"Ēka",Normal,BuildCode,false,BuildSClass);
    EditField(h+200,v,100,"Ēku grupa",Normal,BuildGroupCode,false,BuildGroupSClass);
    EditField(h+370,v,100,"Telpu gr.",Normal,FlatGroupCode,false,FlatGroupSClass);
    EditField(h,v+=20,-50,"Komentārs",Normal,Address,false,0);
    EditField(h+200,v+=20,-50,"Pakalpojumi, kuriem tarifi netiks veidoti",Normal,ExclServList,false,INSClass);
    MatrixBegin(4,v+=40,-25,-20,-,299);
    MatCol(1,30,"No",0,SDate,false,PasteCurDate);
    MatCol(1,120,"Līdz",0,EDate,false,PasteCurDate);
    MatCol(1,-300,"Pārrēķins EUR",0,RowSum,false,0);
    MatCol(1,-200,"Pārrēķins MWh",0,RowSum2,false,0);
    MatCol(1,-100,"Atslēguma dienas",0,OffDays,true,0);
    EndMatrix;
    CheckBox(h=50,v=-22,0,"Rēķinot tarifus nepārbaudīt rindas",DoNotCheckRows);
    CheckBox(h=250,v=-22,0,"Summas ar PVN",InclVAT);
    CheckBox(h=380,v,0,"Atļaut atjaunot datus no ien. rēķiniem",UpdateFromVIVc);
    // SpecialMenu("Tarifu aprēķins",'',0,"CalcServPlanSm");
    SpecialMenu("Pārbaude",'p',1,"CheckServCalcSm");
    //SpecialMenu("",'',0,"PutMissingQtySm");
  EndWindow;

  return;
end;

window FlatGroupSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot telpu grupu",FlatGroupSClass,CGslist,-);
    SpawnClass(FlatGroupDClass);
    SetWRect(20,80,400,298);
    Sizeable(-1,-1,0,0);
    UseView(FlatGroupVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlColKey(110,110,"Komentārs",Comment,false,Comment);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window FlatGroupLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Telpu grupas",FlatGroupLClass,CGmlist,-);
    SpawnClass(FlatGroupDClass);
    SetWRect(20,80,430,298);
    Sizeable(-1,-1,0,0);
    UseView(FlatGroupVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlColKey(110,110,"Komentārs",Comment,false,Comment);
    RlColKey(-220,-220,"Ēka",LinkBuildCode,false,LinkBuildCode);
    RlColKey(-150,-150,"Adrese",Address,false,Address);
    SearchField("Meklēt");
    SpecialMenu("Skaitītāju rādījumi",'s',1,"FlatGroupCounterRessm");
  EndWindow;

  return;
end;

window FlatGroupDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs,vm;

  WindowBegin("Telpu grupa",FlatGroupDClass,CGview,-);
    SetWRect(64,80,320,280);
    Sizeable(-1,-1,0,0);
    UseView(FlatGroupVc);
    h=100; vs = 20;
    EditField(h,v=12,60,"Kods",Normal,Code,false,0);
    EditField(h,v+=vs,-40,"Komentārs",Normal,Comment,false,0);
    EditField(h,v+=vs,-40,"Klasifikācijas",Normal,Classification,false,MSClassSClass);
    EditField(h,v+=vs,80,"Ēka",ViewOnly,LinkBuildCode,false,BuildSClass);
    EditField(h+200,v,-40,"Adrese",ViewOnly,Address,false,0);
    EditField(h,v+=vs,80,"Sākuma datums",Normal,StartDate,false,PasteCurDate);
    EditField(h+200,vm=v,80,"Beigu datums",Normal,EndDate,false,PasteCurDate);
    EditField(h,v+=20,80,"ISP kontrolieris",Normal,ISPController,false,0);
    EditField(h+200,v,80,"Bāze",Normal,Base,false,0);
    CheckBox(h+350,v=vm,0,"Aukstā ūdens starpību aprēķini",ColdWaterDiffCalc);
    CheckBox(h+350,v+=16,0,"Karstā ūdens starpību aprēķini",HotWaterDiffCalc);

    MatrixBegin(4,v+=50,-50,-19,-,199);
    MatCol(1,h=25,"Telpa",0,RowCode,false,FlatsSClass);
    MatCol(1,120,"Komentārs",0,RowComment,false,0);
    EndMatrix;
    SpecialMenu("Mainīt skaitītāju",'m',3,"MSChangeCountFlatGroupMnSm");
    SpecialMenu("Skaitītāju rādījumi",'s',1,"FlatGroupCounterRessm");
  EndWindow;

  return;
end;

window AddressFieldLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Adrešu lauki",AddressFieldLClass,CGmlist,-);
    SpawnClass(AddressFieldDClass);
    SetWRect(20,80,200,300);
    Sizeable(-1,-1,0,0);
    UseView(AddressFieldVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Nr",SerNr,false,SerNr);
    RlColKey(110,110,"Nosaukums",Name,false,Name);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window AddressFieldDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Adrešu lauks",AddressFieldDClass,CGview,-);
    SetWRect(64,80,500,380);
    Sizeable(-1,-1,-1,-1);
    UseView(AddressFieldVc);
    ActiveFieldOnNew("Name");
    h=150; vs = 20;
    EditField(h,v=12,60,"Nr",Normal,SerNr,false,0);
    EditField(h,v+=vs,200,"Nosaukums",Normal,Name,false,0);
    ButtonFrame(h,v+=vs*3,110,6,"Tips");
    RadioButton(h,v,0,0,"Iela",Type);
    RadioButton(h,v+=16,1,0,"Ēkas nr.",Type);
    RadioButton(h,v+=16,2,0,"Pilsēta",Type);
    RadioButton(h,v+=16,3,0,"Novads",Type);
    RadioButton(h,v+=16,4,0,"Pagasts",Type);
    RadioButton(h,v+=16,5,0,"Pasta kods",Type);
  EndWindow;

  return;
end;

window AddressFieldSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot adrešu lauku",AddressFieldSClass,CGother,HBlRecType);
    SetWRect(20,80,250,400);
    Sizeable(-1,-1,0,0);
    StringList(9,9,-40,-10);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window BuildFieldLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ēkas lauku vērtības",BuildFieldLClass,CGmlist,-);
    SpawnClass(BuildFieldDClass);
    SetWRect(20,80,300,400);
    Sizeable(-1,-1,0,0);
    UseView(BuildFieldVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Ēka",BuildCode,false,BuildCode);
    RlColKey(100,100,"Lauks",FieldCode,false,FieldCode);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window BuildFieldDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Ēkas lauka vērtības",BuildFieldDClass,CGview,-);
    SetWRect(64,80,650,350);
    UseView(BuildFieldVc);
    h = 80;
    vs = 20;
    v = 12;
    EditField(h,v,80,"Lauks",Normal,FieldCode,false,BuildFieldCodeSClass);
    EditField(h+140,v,100,"Ēka",ViewOnly,BuildCode,false,BuildSClass);
    MatrixBegin(4,v+=50,-50,-19,-,399);
    MatCol(1,32,"Datums",0,StartDate,false,PasteCurDate);
    MatCol(1,120,"Vērtība",0,Value,false,0);
    MatCol(1,200,"Komentārs",0,Comment,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window BuildFieldCodeSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2;
  real v,vs;

  WindowBegin("Ēkas lauki",BuildFieldCodeSClass,CGslist,-);
    SpawnClass(BuildFieldCodeDClass);
    SetWRect(20,80,460,300);
    UseView(BuildFieldCodeVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Lauks",FieldCode,false,FieldCode);
    RlColKey(100,100,"Īsais nosaukums",ShortName,false,ShortName);
    RlColKey(200,200,"Nosaukums",Name,false,Name);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window BuildFieldCodeDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2;
  real v,vs;

  WindowBegin("Ēkas lauks",BuildFieldCodeDClass,CGview,-);
    SetWRect(64,80,520,200);
    UseView(BuildFieldCodeVc);
    h = 80;
    h2 = h + 200;
    vs = 20;
    v = 12;
    EditField(h,v,90,"Lauks",Normal,FieldCode,false,0);
    EditField(h2,v,100,"Īsais nosaukums",Normal,ShortName,false,0);
    EditField(h,v+=vs,300,"Nosaukums",Normal,Name,false,0);
    EditField(h,v+=vs,70,"Tips",Normal,FieldType,false,SetSClass);
    CheckBox(h2,v,0,"Vidējais aprēķins",CalcAvg);
    EditField(h,v+=vs,70,"Minimums",Normal,Minimum,false,0);
  EndWindow;

  return;
end;

window BuildFieldCodeLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2;
  real v,vs;

  WindowBegin("Ēkas lauki",BuildFieldCodeLClass,CGmlist,-);
    SpawnClass(BuildFieldCodeDClass);
    SetWRect(20,80,460,300);
    UseView(BuildFieldCodeVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Lauks",FieldCode,false,FieldCode);
    RlColKey(100,100,"Īsais nosaukums",ShortName,false,ShortName);
    RlColKey(200,200,"Nosaukums",Name,false,Name);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window BuildFieldSetTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2;
  real v,vs;

  WindowBegin("Ēkas lauku uzstādījumi",BuildFieldSetTClass,CGHbl,HBlRecType);
    SetBlid(BuildFieldSetBlock);
    SetWRect(20,80,340,480);
    h = 8; v = 26; h1=24;
    MatrixBegin(h,v,-31,-20,-,20);
    MatCol(1,h1,"Lauks",0,FieldCode,false,BuildFieldCodeSClass);
    MatCol(1,h1+100,"Nosaukums",0,Name,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window ChBuildFieldWClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Atvērt ēkas lauka vērtības",ChBuildFieldWClass,CGother,RcType);
    SetWRect(100,100,420,160);
    UseView(RcVc);
    h = 80;
    vs = 20;
    v = 12;
    EditField(h,v,100,"Lauks",Normal,f2,false,BuildFieldCodeSClass);
    HalPushButton(h+130,v-5,h+230,v+15,"OpenBuildField","Atvērt");
  EndWindow;

  return;
end;

window CalcServPlanVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,v,vs,vm;

  WindowBegin("Izveidot tarifus",CalcServPlanVClass,CGMnt,RcType);
    SetWRect(20,80,400,330);
    Sizeable(-1,-1,0,0);
    vs = 20; h=100; h2=30; h3=175;
    PeriodField(h,v=6,"Periods");
    EditField(h,v+=vs,100,"Ēka",Normal,f1,false,BuildSClass);
    EditField(h,v+=vs,100,"Ēku grupa",Normal,f4,false,BuildGroupSClass);
    EditField(h,v+=vs,100,"Telpu grupa",Normal,f5,false,FlatGroupSClass);
    EditField(h,v+=vs,100,"Klasifikācijas",Normal,f2,false,MSClassSClass);
    EditField(h,v+=vs,100,"Aprēķina formula",Normal,f3,false,CalcServicePlanSClass);
    ButtonFrame(h2,v+=40,80,3,"Klasif. veids");
    CheckBox(h2,vm=(v),0,"Ēkas",flags[1]);
    CheckBox(h2,v+=16,0,"Ēku grupas",flags[2]);
    CheckBox(h2,v+=16,0,"Telpu grupas",flags[3]);
    CheckBox(h2,v+=30,0,"Palaist apkalpošanu bez papildus parametriem",flags[10]);
    CheckBox(h3,v=vm,0,"Pārrakstīt esošos ierakstus",flags[0]);
    CheckBox(h3,v+=16,0,"Veidot tarifus",flags[4]);
    CheckBox(h3,v+=16,0,"Veidot apr. vērtības",flags[5]);
  EndWindow;

  return;
end;

window MSFlatServInvVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,v,vs;

  WindowBegin("Rēķinu veidošana - telpas",MSFlatServInvVClass,CGMnt,RcType);
    SetWRect(100,100,400,220);
    h = 100;v=10;
    PeriodField(h,v,"Periods");
    EditFieldTL(h,v+=20,82,"Rēķ. datums",M4Date,Normal,0,RegDate,false,PasteCurDate);
    EditFieldTL(h,v+=20,100,"Ēka",M4Code,Normal,50,f1,false,BuildSClass);
    EditFieldTL(h,v+=20,100,"Klasifikācija",M4UStr,Normal,50,f3,false,MSClassSClass);
    EditFieldTL(h,v+=20,100,"Telpa",M4Code,Normal,50,f2,false,FlatsSClass);
    CheckBox(h,v+=20,0,"Grāmatot izveidotos rēķinus",flags[4]);
    CheckBox(h,v+=16,0,"Iekļaut pakalp. bez summas",flags[29]);
  EndWindow;

  return;
end;

window MSBuildServInvVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,v,vs;

  WindowBegin("Rēķinu veidošana - ēkas",MSBuildServInvVClass,CGMnt,RcType);
    SetWRect(100,100,400,220);
    h = 100;v=10;
    PeriodField(h,v,"Periods");
    EditFieldTL(h,v+=20,82,"Rēķ. datums",M4Date,Normal,0,RegDate,false,PasteCurDate);
    EditFieldTL(h,v+=20,100,"Ēka",M4Code,Normal,50,f1,false,BuildSClass);
    EditFieldTL(h,v+=20,100,"Klasifikācija",M4UStr,Normal,50,f3,false,MSClassSClass);
    CheckBox(h,v+=20,0,"Grāmatot izveidotos rēķinus",flags[4]);
  EndWindow;

  return;
end;

window MSFlatServInvRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,v,vs,vm;

  WindowBegin("Rēķinu veidošana - telpas",MSFlatServInvRClass,CGRcW,RcType);
    SetWRect(100,100,420,240);
    h = 100;v=10;
    PeriodField(h,v,"Periods");
    EditFieldTL(h,v+=20,82,"Rēķ. datums",M4Date,Normal,0,RegDate,false,PasteCurDate);
    EditFieldTL(h,v+=20,100,"Ēka",M4Code,Normal,50,f1,false,BuildSClass);
    EditFieldTL(h,v+=20,100,"Klasifikācija",M4UStr,Normal,50,f3,false,MSClassSClass);
    EditFieldTL(h,v+=20,100,"Telpa",M4Code,Normal,50,f2,false,FlatsSClass);
    vm = v+=48;
    ButtonFrame(h=20,v=vm,70,2,"Rādīt");
    RadioButton(h+=10,v=vm,0,0,"Detalizēti",ArtMode);
    RadioButton(h,v+=16,1,0,"Pārskats",ArtMode);
    EndFrame;
    ButtonFrame(h=140,v=vm,170,4,"Rādīt");
    CheckBox(h+=10,v,0,"Tikai telpas bez rēķiniem",flags[0]);
    CheckBox(h,v+=16,0,"Summas no rēķina",flags[1]);
    CheckBox(h,v+=16,0,"Ģenerēt līgumsodu",flags[2]);
    CheckBox(h,v+=16,0,"Iekļaut pakalp. bez summas",flags[29]);
    EndFrame;
  EndWindow;

  return;
end;

window MSBuildServInvRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,v,vs,vm;

  WindowBegin("Rēķinu veidošana - ēkas",MSBuildServInvRClass,CGRcW,RcType);
    SetWRect(100,100,400,240);
    h = 100;v=10;
    PeriodField(h,v,"Periods");
    EditFieldTL(h,v+=20,82,"Rēķ. datums",M4Date,Normal,0,RegDate,false,PasteCurDate);
    EditFieldTL(h,v+=20,100,"Ēka",M4Code,Normal,50,f1,false,BuildSClass);
    EditFieldTL(h,v+=20,100,"Klasifikācija",M4UStr,Normal,50,f3,false,MSClassSClass);
    vm = v+=48;
    ButtonFrame(h,v=vm,140,2,"Rādīt");
    CheckBox(h,v,0,"Tikai telpas bez rēķiniem",flags[0]);
    CheckBox(h,v+=16,0,"Summas no rēķina",flags[1]);
    CheckBox(h,v+=16,0,"Ģenerēt līgumsodu",flags[2]);
    EndFrame;
  EndWindow;

  return;
end;

window OwnersDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,v;

  WindowBegin("Īpašnieki",OwnersDClass,CGview,-);
    SetWRect(64,80,720,200);
    UseView(OwnersVc);
    h = 100; v = 12; h1=24;
    EditField(h,v,90,"Kods",Normal,Code,false,0);
    MatrixBegin(8,52,-31,-20,-,20);
    MatCol(1,h1,"Klients",0,CustCode,false,CUSClass);
    MatCol(1,h1+=80,"Nosaukums",0,CustName,false,0);
    MatCol(1,h1+=120,"Sākuma datums",0,StartDate,false,PasteCurDate);
    MatCol(1,h1+=100,"Beigu datums",0,EndDate,false,PasteCurDate);
    MatCol(1,h1+=100,"Kods/Reģ. Nr",0,RegNr,false,0);
    MatCol(1,h1+=100,"Dom. daļas",0,DeemedPart,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window CountResTypeSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot skaitītāja rādījuma tipu",CountResTypeSClass,CGother,HBlRecType);
    SetWRect(20,80,250,400);
    Sizeable(-1,-1,0,0);
    StringList(9,9,-40,-10);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window CountResTypeTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,v;

  WindowBegin("Skaitītāju rādījumu tipi",CountResTypeTClass,CGHbl,HBlRecType);
    SetBlid(CountResTypBlock);
    SetWRect(20,80,340,480);
    h = 8; v = 26; h1=24;
    MatrixBegin(h,v,-31,-20,-,20);
    MatCol(1,h1,"Kods",0,Code,false,0);
    MatCol(1,h1+100,"Nosaukums",0,Name,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window CheckServCalcVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Tarifu aprēķinu formulas pārbaude",CheckServCalcVClass,CGMnt,RcType);
    SetWRect(20,80,400,200);
    PeriodField(120,10,"Periods");
    EditFieldTL(120,30,150,"Ēka",M4UStr,Normal,41,f2,false,BuildSClass);
    EditFieldTL(120,50,150,"Ēku grupa",M4UStr,Normal,41,f4,false,BuildGroupSClass);
    EditFieldTL(120,70,150,"Telpu grupa",M4UStr,Normal,41,f3,false,FlatGroupSClass);
  EndWindow;

  return;
end;

window INPayPrioritySClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Artikulu apmaksas prioritātes",INPayPrioritySClass,CGslist,-);
    SpawnClass(INPayPriorityDClass);
    SetWRect(74,80,509,298);
    Sizeable(-1,-1,0,0);
    UseView(INPayPriorityVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Nr.",SerNr,false,SerNr);
    Calculatedcolumn(85,85,"Apm. veids","TypeColumnINPayPriorityCC",false);
    RlColKey(250,250,"Komentārs",Comment,false,Comment);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window INPayPriorityLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Artikulu apmaksas prioritātes",INPayPriorityLClass,CGmlist,-);
    SpawnClass(INPayPriorityDClass);
    SetWRect(74,80,509,298);
    Sizeable(-1,-1,0,0);
    UseView(INPayPriorityVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Nr.",SerNr,false,SerNr);
    Calculatedcolumn(85,85,"Apm. veids","TypeColumnINPayPriorityCC",false);
    RlColKey(250,250,"Komentārs",Comment,false,Comment);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window INPayPriorityDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,vs,v;

  WindowBegin("Artikulu apmaksas prioritātes",INPayPriorityDClass,CGview,-);
    SetWRect(64,80,320,280);
    Sizeable(-1,-1,0,0);
    UseView(INPayPriorityVc);
    h=100; h2=280; vs = 20;
    EditField(h,v=12,60,"Sērijas numurs",ViewOnly,SerNr,false,0);
    EditField(h+150,v,-100,"Komentārs",Normal,Comment,false,0);
    ButtonFrame(h,v+=40,80,2,"Apmaksas veids");
    RadioButton(h,v,0,0,"Prioritārs",INPayType);
    RadioButton(h,v+=16,1,0,"Proporcionāls",INPayType);
    RadioButton(h,v+=16,2,0,"Tikai norādītos",INPayType);
    MatrixBegin(4,v+=50,-50,-19,-,999);
    MatCol(1,h=25,"Artikuls",0,ArtCode,false,INSClass);
    MatCol(1,h+=100,"Prioritāte",0,Type,false,SetSClass);
    EnterSkip(ArtCode);
    MatCol(1,h+=150,"Komentārs",0,Comment,false,0);
    InsertRowTest;
    DeleteRowTest;
    EndMatrix;
  EndWindow;

  return;
end;

window FlatFieldsRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,v,vs,vm;

  WindowBegin("Telpu lauki",FlatFieldsRClass,CGRcW,RcType);
    SetWRect(100,100,400,240);
    h=100; v=6;
    PeriodField(h,v,"Periods");
    EditField(h,v+=20,100,"Ēka",Normal,f1,false,BuildSClass);
    EditField(h,v+=20,100,"Telpas lauki",Normal,f2,false,FlatFieldCodeSClass);
    EditField(h,v+=20,100,"Pakalpojums",Normal,f3,false,INSClass);
    // CheckBox(h,v+=30,0,"Ar koeficientiem",flags[1]);
    ButtonFrame(h,v+=40,70,2,"Rādīt");
    RadioButton(h,v,0,0,"Pārskats",ArtMode);
    RadioButton(h,v+=16,1,0,"Detalizēti",ArtMode);
  EndWindow;

  return;
end;

window MSCountListRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Skaitītāju rādījumu saraksts",MSCountListRClass,CGrCW,RcType);
    SetWRect(100,100,400,220);
    h=100; v=10; vs=20;
    PeriodField(h,v,"Periods");
    EditFieldTL(h,v+=vs,100,"Skaitītājs",M4UStr,Normal,60,f2,false,FlatCountersSClass);
    CheckBox(h+120,v,0,"Vecais",flags[1]);
    EditFieldTL(h,v+=vs,100,"Ēka",M4UStr,Normal,60,f3,false,BuildSClass);
    EditFieldTL(h,v+=vs,100,"Telpa",M4UStr,Normal,60,f5,false,FlatsSClass);
    EditFieldTL(h,v+=vs,100,"Skaitītāja tips",M4UStr,Normal,60,f4,false,INSClass);
    CheckBox(h,v+=vs,0,"Skaitītāji bez rādījuma",flags[0]);
  EndWindow;

  return;
end;

window RecalcItemPayHistVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real v;

  WindowBegin("Pārrēķināt artikulu apmaksu vēsturi",RecalcItemPayHistVClass,CGMnt,RcType);
    SetWRect(20,80,300,120);
    StaticText(20,v=10,"Apkalpošana pārrēķina artikulu parādā vēstures",false);
    StaticText(20,v+=20,"un statusa atbalsta reģistrus",false);
    EditField(100,v+=20,100,"Klients",Normal,f1,false,CUSClass);
  EndWindow;

  return;
end;

window IntPercLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Soda procenti",IntPercLClass,CGmlist,-);
    SpawnClass(IntPercDClass);
    SetWRect(20,80,500,298);
    Sizeable(-1,-1,0,0);
    UseView(IntPercVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlColKey(100,100,"Nosaukums",Description,false,Description);
    RlCol   (320,320,"Nokl. Procents",DefIntPrc,false);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window IntPercSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot soda procentu",IntPercSClass,CGslist,-);
    SpawnClass(IntPercDClass);
    SetWRect(20,80,500,298);
    Sizeable(-1,-1,0,0);
    UseView(IntPercVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlColKey(100,100,"Nosaukums",Description,false,Description);
    RlCol   (320,320,"Nokl. Procents",DefIntPrc,false);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window IntPercDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("Soda procents",IntPercDClass,CGview,-);
    SetWRect(64,80,500,300);
    Sizeable(-1,-1,500,0);
    UseView(IntPercVc);
    EditField(h=100,v=6 ,   95,"Kods",Normal,Code,false,0);
    EditField(h,v+=20,-50,"Nosaukums",Normal,Description,false,0);
    EditField(h,v+=20,100,"Nokl. procents",Normal,DefIntPrc,false,0);
    EditField(h+200,v,-50,"Soda artikuls",Normal,IntItem,false,INSClass);
    ButtonFrame(h,v+=40,150,2,"Aprēķina veids");
    RadioButton(h,v,0,1,"Lik. procenti",Calcf);
    RadioButton(h,v+=16,1,0,"Līgumsods",Calcf); //old Kav. nauda Lik. procenti
    RadioButton(h,v+=16,2,0,"Nerēķināt",Calcf);
    MatrixBegin(4,v+=40,-50,-19,-,200);
    MatCol(1,32,"Sākuma datums",0,StartDate,false,PasteCurDate);
    MatCol(1,117,"Beigu datums",0,EndDate,false,PasteCurDate);
    MatCol(1,-180,"Soda procents",0,IntPrc,false,0);
    MatColTL(1,-80,"Apr. veids",0,M4Set,Normal,1068,CalcWay,false,SetSClass);
    Endmatrix;
  EndWindow;

  return;
end;

window BBS_IVSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot rēķinu",BBS_IVSClass,CGslist,-);
    SetWRect(20,80,790,300);
    Sizeable(-1,-1,0,0);
    SpawnClass(IVDClass);
    UseView(IVVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,2,"Nr.",SerNr,false,OBS_SerNr);
    RlColKey(70,70,"OK",OKFlag,false,OBS_OKFlag);
    RlColKey(105,105,"Rēķ. dat.",InvDate,false,OBS_InvDate);
    RlCol(180,180,"Rēķ. adrese",Addr1,false);
    RlCol(360,360,"Klients",CustCode,false);
    RlCol(430,430,"Nosaukums",Addr0,false);
    RlCol(-170,-170,"Ēka",BuildCode,false);
    RlCol(-100,-100,"Kopā",Sum4,true);
    RlCol(-35,-35,"",CredMark,true);
    RlCol(-25,-25,"Val.",CurncyCode,true);
    RlCol(-1,-1,"",Invalid,true);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window UndoInvVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("Atcelt rēķinu veidošanu",UndoInvVClass,CGMnt,RcType);
    SetWRect(100,100,400,250);
    h=100;v=10;
    // PeriodField(h,v,"Periods");
    EditField(h,v,100,"Datums",Normal,d1,false,PasteCurDate);
    EditFieldTL(h,v+=20,100,"Ēka",M4Str,Normal,40,f1,false,BuildSClass);
    EditFieldTL(h,v+=20,100,"Klasifikācija",M4Str,Normal,40,f2,false,MSClassSClass);
    // ButtonFrame(h=60,v+=60,110,2,"Rēķini ar artikula veidu");
    // RadioButton(h+=10,v,0,1,"Bez atzīmes",flags[16]);
    // RadioButton(h,v+=16,1,0,"Ar papildus atzīmi",flags[16]);
    // RadioButton(h,v+=16,2,0,"Visus",flags[16]);
  EndWindow;

  return;
end;

window SearchFlat2RClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("Meklēt telpu",SearchFlat2RClass,CGRcW,RcType);
    SetWRect(20,80,400,150);
    h=100;
    EditFieldTL(h,v=10,150,"Adrese",M4Str,Normal,200,f1,false,0);
    EditFieldTL(h,v+=20,60,"Dzīv. Nr.",M4Str,Normal,20,f2,false,0);
  EndWindow;

  return;
end;

window NApsSetTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("Tiešo norēķinu uzstādījumi",NApsSetTClass,CGSbl,-);
    SetBlid(NApsSetBlock);
    SetWRect(64,80,400,300);
    Sizeable(-1,-1,0,0);
    EditField(h=150,v=10,100,"Globālā apm. prioritāte",Normal,INPayPriority,false,INPayPrioritySClass);
    EditField(h,v+=20,100,"Rādījumu sāk. datums",Normal,DefaultCountResSDate,false,PasteCurDate);
    EditField(h,v+=20,100,"Rādījumu beigu datums",Normal,DefaultCountResEDate,false,PasteCurDate);
    EditField(h,v+=20,100,"Līgumsoda grām. konts",Normal,PenAccCode,false,AccSClass);
    CheckBox(75,v+=32,0,"Rēķinu arhivēšana PDF",AddPDFToInvoice);
    CheckBox(75,v+=16,0,"Negatīvas vērtības \"Skaitītāju rādījumu imports\" ",NegValCountResIn);
    CheckBox(75,v+=32,0,"Izlaist sam. datuma pārbaudi rēķinā",SkipPayDateCheck);
    
    
  EndWindow;

  return;
end;

window ChangeCount2VClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Nomainīt skaitītāju",ChangeCount2VClass,CGMnt,RcType);
    SetWRect(100,100,500,460);
    h = 140; vs=20;
    StaticText(h,v=15,"Vecais skaitītājs",true);
    EditFieldTL(h,v+=7,100,"Vecā skait. ID",M4Long,Normal,0,long1,false,FlatCounters2SClass);
    EditFieldTL(h,v+=vs,100,"Vecā skait. telpa",M4Code,ViewOnly,20,f3,false,0);
    EditFieldTL(h,v+=vs,100,"Vecā skait. numurs",M4Code,ViewOnly,20,f1,false,0);
    EditFieldTL(h,v+=vs,100,"Skait. nomaiņas datums",M4Date,Normal,0,d1,false,PasteCurDate);
    EditFieldTL(h,v+=vs,100,"Pēd. fiksētais rād. 1",M4Str,ViewOnly,10,f8,false,0);
    StaticText(h+110,v+13,"(Bez tipa vai MWH)",false);
    EditFieldTL(h,v+=vs,100,"Pēd. fiksētais rād. 2",M4Str,ViewOnly,10,f10,false,0);
    StaticText(h+110,v+13,"(M3)",false);
    EditFieldTL(h,v+=vs,100,"Rād. nomaiņas brīdī 1",M4Str,Normal,10,f9,false,0);
    StaticText(h+110,v+13,"(Bez tipa vai MWH)",false);
    EditFieldTL(h,v+=vs,100,"Rād. nomaiņas brīdī 2",M4Str,Normal,10,f11,false,0);
    StaticText(h+110,v+13,"(M3)",false);
    StaticText(h,v+=40,"Jaunais skaitītājs",true);
    //EditFieldTL(h,v=6,100,"Jaunā skait. telpa",M4Code,Normal,20,f4,false,FlatsSClass);
    CheckBox(h,v+=7,0,"Veidot jaunu skaitītāju",flags[0]);
    EditFieldTL(h,v+=vs,100,"Uzst. datums",M4Date,Normal,0,sStartDate,false,PasteCurDate);
    EditFieldTL(h,v+=vs,100,"Jaunā skaitītāja numurs",M4Code,Normal,20,f2,false,FirstFreeMainCountNoSClass); //FlatCountersSClass
    EditFieldTL(h,v+=vs,100,"Sākuma rādījums 1",M45Val,Normal,0,vals1,false,0);
    StaticText(h+110,v+13,"(Bez tipa vai MWH)",false);
    EditFieldTL(h,v+=vs,100,"Sākuma rādījums 2",M45Val,Normal,0,vals2,false,0);
    StaticText(h+110,v+13,"(M3)",false);
    EditFieldTL(h,v+=vs,100,"Derīgs līdz",M4Date,Normal,0,d2,false,PasteCurDate);
    EditFieldTL(h,v+=vs,100,"Verif. datums",M4Date,Normal,0,RegDate,false,PasteCurDate);
    EditFieldTL(h,v+=vs,100,"Ražotājs",M4Str,Normal,100,f5,false,CountManSClass);
    EditFieldTL(h,v+=vs,100,"Rūpnieciskais nr.",M4Str,Normal,100,f12,false,0);
    EditFieldTL(h,v+=vs,100,"Uzst. organizācija",M4Str,Normal,100,f6,false,CountInstOrgSClass);
    EditFieldTL(h,v+=vs,100,"Meistars",M4Code,Normal,10,f7,false,ExpertSClass);
  EndWindow;

  return;
end;

window SearchNAContractRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;
  WindowBegin("Meklēt līgumu",SearchNAContractRClass,CGRcW,RcType);
  SetWRect(64,80,509,298);
  vs =20;h=100;v=5;
  EditFieldTL(h,6 ,-20,"Meklēt",M4Str,Normal,40,f1,false,0);
  ButtonFrame(h,v=50,123,9,"Meklēt pēc");
  RadioButton(h,v,1,0,"Nosaukuma",ArtMode);
  RadioButton(h,v+=16,2,0,"Klienta nr.",ArtMode);
  RadioButton(h,v+=16,3,0,"Adreses",ArtMode);
  RadioButton(h,v+=16,0,0,"Jebkura lauka",ArtMode);
  EndFrame;
  EndWindow;

  return;
end;

window BBSIVCommentDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Rēķinu komentāri",BBSIVCommentDClass,CGview,-);
    SetWRect(20,80,620,410);
    UseView(BBSIVCommentVc);
    Sizeable(-1,-1,0,0);
    vs=20;
    EditFieldTL(h=100,v=6,60,"Numurs",M4Long,ViewOnly,0,SerNr,false,0);
    EditFieldTL(h,v+=vs,260,"Komentārs",M4Str,Normal,100,Comment,false,0);
    EditFieldTL(h,v+=vs,80,"Sākuma datums",M4Date,Normal,0,StartDate,false,PasteCurDate);
    EditFieldTL(h+180,v,80,"Beigu datums",M4Date,Normal,0,EndDate,false,PasteCurDate);
    EditFieldTL(h,v+=vs,-40,"Brīdinājums",M4Str,Normal,255,WarnText,false,0);
    MatrixBegin(20,v+=40,-50,-7,-,99);
    MatCol(1,25,"Komentārs",0,RowText,false,0);
    MatCol(1,-120,"Neiekļ. klafikācijām",0,Classification,false,CClassSClass);
    EndMatrix;
  EndWindow;

  return;
end;

window BBSIVCommentLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Rēķinu komentāri",BBSIVCommentLClass,CGmlist,-);
    SpawnClass(BBSIVCommentDClass);
    SetWRect(20,80,560,298);
    Sizeable(-1,-1,0,0);
    UseView(BBSIVCommentVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Numurs",SerNr,false,SerNr);
    RlColKey(100,100,"Sāk. datums",StartDate,false,StartDate);
    RlColKey(180,180,"Beigu datums",EndDate,false,EndDate);
    RlColKey(260,260,"Komentārs",Comment,false,Comment);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window SearchBuildRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("Meklēt ēku",SearchBuildRClass,CGRcW,RcType);
    SetWRect(20,80,400,150);
    h=100;
    EditFieldTL(h,v=10,150,"Adrese",M4Str,Normal,200,f1,false,0);
  EndWindow;

  return;
end;

window CountResInputLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Skaitītāju rādījumu ievade",CountResInputLClass,CGmlist,-);
    SpawnClass(CountResInputDClass);
    SetWRect(20,80,800,298);
    sizeable(-1,-1,0,0);
    UseView(CountResInputVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Numurs",SerNr,false,SerNr);
    RlColKey(70,70,"Izv.",CountResMade,false,CountResMade);
    RlColKey(94,94,"Sāk. datums",StartDate,false,StartDate);
    RlColKey(174,174,"Beigu datums",EndDate,false,EndDate);
    RlColKey(244,244,"Adrese",Address,false,Address);
    RlColKey(-180,-180,"Ēka",BuildCode,false,BuildCode);
    RlColKey(-100,-100,"Skaitītāju tipi",InputCTypes,false,InputCTypes);
    SearchField("Meklēt");
    SpecialMenu("Ievadīt sarakstu",'X',0,"XlsIn_CountResInputLsm");
  EndWindow;

  return;
end;

window CountResInputDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("Skaitītāju rādījumu ievade",CountResInputDClass,CGview,-);
    SetWRect(20,80,900,315);
    UseView(CountResInputVc);
    sizeable(-1,-1,0,0);
    ActiveFieldOnNew("StartDate");
    EditField(h=80,v=6,70,"Numurs",ViewOnly,SerNr,false,0);
    EditField(h+180,v,70,"Sākuma datums",Normal,StartDate,false,PasteCurDate);
    EnterSkip(BuildCode);
    EditField(h+360,v,70,"Beigu datums",Normal,EndDate,false,PasteCurDate);
    EditFieldTL(h+530,v,-80,"Skaitītāju tipi",M4UStr,Normal,100,InputCTypes,false,INSClass);
    EditField(h,v+=20,100,"Ēka",Normal,BuildCode,false,BuildSClass);
    EnterSkip(Math);
    EditField(h+180,v,-80,"Adrese",Normal,Address,false,0);
    MatrixBegin(4,v+=40,-50,-20,-,999);
    MatCol(1,24,"Skaitītājs",0,CounterNo,false,FlatCountersSClass);
    MatCol(1,100,"Skait. tips",0,CounterType,false,0);
    MatCol(1,160,"Telpa",0,FlatCode,false,FlatsSClass);
    EnterSkip(CurAmount);
    MatColTL(1,230,"Adrese",0,M4Str,ViewOnly,0,RowAddress,false,0);
    MatColTL(1,-500,"R.Tips",0,M4Code,ViewOnly,0,CountResType,false,0);
    MatColTL(1,-460,"Iepr.rād.datums",0,M4Date,ViewOnly,0,PrevDate,false,0);
    MatColTL(1,-370,"Iepr. rād.",0,M45Val,ViewOnly,0,PrevAmount,false,0);
    MatCol(1,-300,"Tekošais rād.",0,CurAmount,false,0);
    EnterSkip(CurAmount);
    MatColTL(1,-210,"Sask.",0,M45Val,Normal,0,SumAmount,false,0);
    EnterSkip(SumAmount);
    MatCol(1,-150,"Tips",0,Type,false,SetSClass);
    MatCol(1,-70,"Rādījums",0,CountResNr,false,CountResLClass);
    EndMatrix;
    InsertrowTest;
    DeleterowTest;
    SoftEditField(-100,-20,70,"Kopā",ViewOnly,"InputTotSum",true,0,M4Str,20);
    SpecialMenu("Ievietot skaitītājus",'',0,"InsertFlatCountersSm");
    SpecialMenu("Sūtīt PDF e-pastā",'',1,"CountResInputMailSm");
    SpecialMenu("Veidot skaitītāju rādījumus",'',2,"CreateCountResSm");
    SpecialMenu("Dzēst rādījumus",'',2,"DeleteCountResSm");
    
  EndWindow;

  return;
end;

window FirstFreeMainCountNoSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot skaitītāju numuru",FirstFreeMainCountNoSClass,CGother,HBlRecType);
    SetWRect(20,80,300,150);
    Sizeable(-1,-1,0,0);
    StringList(9,9,-40,-10);
  EndWindow;

  return;
end;

window ServCalcValueExpEClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("Aprēķināto vērtību exports",ServCalcValueExpEClass,CGEcW,RcType);
    SetWRect(20,80,450,150);
    PeriodField(h=100,v=10,"Periods");
    EditFieldTL(h,v+=20,100,"Exporta parametri",M4Code,Normal,50,f1,false,CalcServicePlanSClass);
  EndWindow;

  return;
end;

window CountResInputRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Drukāt skaitītāju rādījumu ievades",CountResInputRClass,CGRcW,RcType);
    SetWRect(20,80,400,100);
    EditField(120,6,100,"Sērijas Nr.",Normal,f1,false,0);
  EndWindow;

  return;
end;

window BuildCountResInputLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ēku skaitītāju rādījumu ievade",BuildCountResInputLClass,CGmlist,-);
    SpawnClass(BuildCountResInputDClass);
    SetWRect(20,80,500,298);
    sizeable(-1,-1,0,0);
    UseView(BuildCountResInputVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Numurs",SerNr,false,SerNr);
    RlColKey(120,120,"Izv.",CountResMade,false,CountResMade);
    RlColKey(144,144,"Sāk. datums",StartDate,false,StartDate);
    RlColKey(264,264,"Beigu datums",EndDate,false,EndDate);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window BuildCountResInputDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Ēku skaitītāju rādījumu ievade",BuildCountResInputDClass,CGview,-);
    SetWRect(20,80,1360,315);
    UseView(BuildCountResInputVc);
    sizeable(-1,-1,0,0);
    ActiveFieldOnNew("StartDate");
    EditField(h=80,v=6,70,"Numurs",ViewOnly,SerNr,false,0);
    EditField(h+180,v,70,"Sākuma datums",Normal,StartDate,false,PasteCurDate);
    EditField(h+360,v,70,"Beigu datums",Normal,EndDate,false,PasteCurDate);
    EnterSkip(Math);
    MatrixBegin(4,v+=40,-50,-20,-,999);
    Flip(0);
    MatCol(1,34,"Skaitītājs",0,CounterNo,false,FlatCountersSClass);
    EnterSkip(CurAmount);
    MatCol(1,100,"Skait. tips",0,CounterType,false,0);
    MatCol(1,160,"E,TG,EG",0,CodeField,false,0);
    MatColTL(1,230,"Adrese",0,M4Str,ViewOnly,0,Address,false,0);
    Flip(1);
    MatColTL(1,-950,"Iepr.rād.datums",0,M4Date,ViewOnly,0,PrevDate,false,0);
    MatColTL(1,-860,"Iepr. rād.",0,M45Val,ViewOnly,0,PrevAmount,false,0);
    MatCol(1,-790,"Tekošais rād.",0,CurAmount,false,0);
    MatColTL(1,-720,"Sask.",0,M45Val,Normal,0,SumAmount,false,0);
    MatCol(1,-660,"Nodots",0,DelivDate,false,PasteCurDate);
    MatCol(1,-580,"Tips",0,Type,false,SetSClass);
    MatColTL(1,-510,"Mēn. -1",0,M45Val,Normal,0,LastAmount1,false,0);
    MatColTL(1,-440,"Mēn. -2",0,M45Val,Normal,0,LastAmount2,false,0);
    MatColTL(1,-360,"Mēn. -3",0,M45Val,Normal,0,LastAmount3,false,0);
    MatColTL(1,-290,"Mēn. -4",0,M45Val,Normal,0,LastAmount4,false,0);
    MatColTL(1,-220,"Mēn. -5",0,M45Val,Normal,0,LastAmount5,false,0);
    MatColTL(1,-150,"Mēn. -6",0,M45Val,Normal,0,LastAmount6,false,0);
    MatColTL(1,-80,"Rādījums",0,M4Long,Normal,0,CountResSerNr,false,CountResLClass);
    Flip(2);
    MatColTL(1,-840,"Mēn. -1",0,M45Val,Normal,0,LastAmount1,false,0);
    MatColTL(1,-770,"Mēn. -2",0,M45Val,Normal,0,LastAmount2,false,0);
    MatColTL(1,-700,"Mēn. -3",0,M45Val,Normal,0,LastAmount3,false,0);
    MatColTL(1,-630,"Mēn. -4",0,M45Val,Normal,0,LastAmount4,false,0);
    MatColTL(1,-560,"Mēn. -5",0,M45Val,Normal,0,LastAmount5,false,0);
    MatColTL(1,-490,"Mēn. -6",0,M45Val,Normal,0,LastAmount6,false,0);
    MatColTL(1,-420,"Mēn. -7",0,M45Val,Normal,0,LastAmount7,false,0);
    MatColTL(1,-350,"Mēn. -8",0,M45Val,Normal,0,LastAmount8,false,0);
    MatColTL(1,-280,"Mēn. -9",0,M45Val,Normal,0,LastAmount9,false,0);
    MatColTL(1,-210,"Mēn. -10",0,M45Val,Normal,0,LastAmount10,false,0);
    MatColTL(1,-140,"Mēn. -11",0,M45Val,Normal,0,LastAmount11,false,0);
    MatColTL(1,-70,"Mēn. -12",0,M45Val,Normal,0,LastAmount12,false,0);
    EndMatrix;
    InsertrowTest;
    DeleterowTest;
    vs = 20;
    v = 46; VTab(-35,v,-16,v+vs,ToolFlip,1,"A");
    v = v + vs; VTab(-35,v,-16,v+vs,ToolFlip,2,"B");
    SpecialMenu("Veidot skaitītāju rādījumus",'',1,"CreateBuildCountResSm");
  EndWindow;

  return;
end;

window CounterResCheckRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("Skaitītāju rādījumu pārbaude",CounterResCheckRClass,CGRcW,RcType);
    SetWRect(100,100,420,240);
    h=100;v=10;
    PeriodField(h,v,"Periods");
    EditFieldTL(h,v+=20,100,"Ēka",M4Code,Normal,50,f1,false,BuildSClass);
    CheckBox(h,v+=25,0,"Apkures skait.",flags[1]);
    CheckBox(h,v+=16,0,"Karstā ūdens skait.",flags[2]);
  EndWindow;

  return;
end;

window MSMergegServInvVClass:1
wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Rēķinu veidošana - apvienotie",MSMergegServInvVClass,CGMnt,RcType);
    SetWRect(100,120,400,278);
    PeriodField(h=100,v=10,"Periods");
    EditFieldTL(h,v+=20,82,"Rēķ. datums",M4Date,Normal,0,RegDate,false,PasteCurDate);
    EditField(h,v+=20,100,"Klients",Normal,f1,false,CUSClass);
    EditField(h,v+=20,100,"Klasifikācija",Normal,f2,false,CClassSClass);
    CheckBox(h,v+=20,0,"Grāmatot izveidotos rēķinus",flags[4]);
    CheckBox(h,v+=16,0,"Iekļaut pakalp. bez summas",flags[29]);
  EndWindow;

  return;
end;

window MSMergegServInvRClass:1
wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Rēķinu veidošana - apvienotie",MSMergegServInvRClass,CGMnt,RcType);
    SetWRect(100,120,400,278);
    PeriodField(h=100,v=10,"Periods");
    EditFieldTL(h,v+=20,82,"Rēķ. datums",M4Date,Normal,0,RegDate,false,PasteCurDate);
    EditField(h,v+=20,100,"Klients",Normal,f1,false,CUSClass);
    EditField(h,v+=20,100,"Klasifikācija",Normal,f2,false,CClassSClass);
    // ButtonFrame(h=140,v=vm,140,2,"Rādīt");
    // CheckBox(h+=10,v,0,"Tikai klienti bez rēķiniem",flags[0]);
    CheckBox(h,v+=20,0,"Summas no rēķina",flags[1]);
    // CheckBox(h,v+=16,0,"Ģenerēt līgumsodu",flags[2]);
    CheckBox(h,v+=16,0,"Iekļaut pakalp. bez summas",flags[29]);
    EndFrame;
  EndWindow;

  return;
end;

window AddressField2SClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot adrešu lauku",AddressField2SClass,CGother,HBlRecType);
    SetWRect(20,80,250,400);
    Sizeable(-1,-1,0,0);
    StringList(9,9,-40,-10);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window PDFInvTextTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("PDF Rēķinu sūtīšana",PDFInvTextTClass,CGHbl,HBlRecType);
    SetWRect(20,80,532,357);
    Sizeable(-1,-1,0,0);
    SetBlid(PDFInvTextBlock);
    MatrixBegin(8,20,-31,-20,-,99);
    MatCol(1,24,"Kods",0,Code,false,LTxtSClass);
    MatCol(1,84,"Sākuma datums",0,StartDate,false,PasteCurDate);
    MatCol(1,174,"Beigu datums",0,EndDate,false,PasteCurDate);
    MatCol(1,254,"Komentārs",0,Comment,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window InvToEmailVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs,vm;

  WindowBegin("Sūtīt rēķinus uz e-pastu",InvToEmailVClass,CGMnt,RcType);
    SetWRect(20,80,350,260);
    vs = 20;
    PeriodField(h=100,v=6,"Periods");
    EditField(h,v+=vs,100,"Ēka",Normal,f1,false,BuildSClass);
    EditField(h,v+=vs,100,"Ēku klasifikācija",Normal,f2,false,MSClassSClass);
    vm=v;
    ButtonFrame(h=20,v+=40,110,2,"Nosūtītāja adrese");
    RadioButton(h,v,0,0,"Sistēmas",flags[5]);
    RadioButton(h,v+=16,1,0,"Lietotāja",flags[5]);
    ButtonFrame(h=170,v=vm+40,110,2,"Sūtīt");
    RadioButton(h,v,0,0,"Tikai nenosūtītos",flags[6]);
    RadioButton(h,v+=16,1,0,"Visus",flags[6]);
  EndWindow;

  return;
end;

window InvToEmailTaskVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs,vm;

  WindowBegin("Sūtīt rēķinus uz e-pastu (Task)",InvToEmailTaskVClass,CGMnt,RcType);
    SetWRect(20,80,350,260);
    vs = 20;
    PeriodField(h=100,v=6,"Periods");
    EditField(h,v+=vs,100,"Ēka",Normal,f1,false,BuildSClass);
    EditField(h,v+=vs,100,"Ēku klasifikācija",Normal,f2,false,MSClassSClass);
    EditField(h,v+=vs,100,"Klienta kategorija",Normal,f3,false,CCatSClass);
    vm=v;
    // ButtonFrame(h=20,v+=40,110,2,"Nosūtītāja adrese");
    // RadioButton(h,v,0,0,"Sistēmas",flags[5]);
    // RadioButton(h,v+=16,1,0,"Lietotāja",flags[5]);
    ButtonFrame(h=170,v=vm+40,110,2,"Sūtīt");
    RadioButton(h,v,0,0,"Tikai nenosūtītos",flags[6]);
    RadioButton(h,v+=16,1,0,"Visus",flags[6]);
  EndWindow;

  return;
end;

window PDFInvToEmailRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("PDF rēķinu sūtīšana uz e-pastiem",PDFInvToEmailRClass,CGRcW,RcType);
    SetWRect(20,80,400,180);
    PeriodField(h=120,v=6,"Periods");
    EditFieldTL(h,v+=20,100,"Ēka",M4Str,Normal,30,f1,false,BuildSClass);
    EditFieldTL(h,v+=20,100,"Ēku klasifikācija",M4Str,Normal,30,f2,false,MSClassSClass);
  EndWindow;

  return;
end;


window NonStopSleepTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Non stop apaklpošanu aiztures laiki",NonStopSleepTClass,CGHbl,HBlRecType);
    SetWRect(20,80,532,357);
    Sizeable(-1,-1,0,0);
    SetBlid(NonStopSleepBlock);
    MatrixBegin(8,20,-31,-20,-,99);
    MatCol(1,24,"Apkalpošana",0,MaintType,false,SetSClass);
    MatCol(1,154,"Laiks (sekundēs)",0,SleepTime,false,0);
    MatCol(1,254,"Komentārs",0,Comment,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window AddINtoNAContrVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Pievienot / noņemt pakalpojumus līgumiem",AddINtoNAContrVClass,CGMnt,RcType);
    SetWRect(100,100,340,310);
    h = 100; v = 10; vs = 20;
    EditField(h,v,100,"Ēka",Normal,f1,false,BuildSClass);
    EditField(h,v+=vs,100,"Ēku klasifikācija",Normal,f5,false,MSClassSClass);
    EditField(h,v+=vs,100,"Telpu grupa",Normal,f6,false,FlatGroupSClass);
    // EditField(h,v+=vs,100,"Dzīvokļu kārtoš.nr",Normal,f3,false,0);
    EditFieldTL(h,v+=vs,100,"Artikuls",M4Code,Normal,20,f2,false,INSClass);
    EditFieldTL(h,v+=vs,100,"Daudzums",M4Val,Normal,0,vals0,false,0);
    EditFieldTL(h,v+=vs,100,"Ja ir artikuls",M4Code,Normal,20,f4,false,INSClass);
    ButtonFrame(h,v+=50,100,2,"Darbība");
    RadioButton(h,v,0,0,"Pievienot",flags[1]);
    RadioButton(h,v+=16,1,0,"Noņemt",flags[1]);
  EndWindow;

  return;
end;

window ChangeFlatCounterTypeVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,v,vs;

  WindowBegin("Skaitītāja tipa maiņa",ChangeFlatCounterTypeVClass,CGMnt,RcType);
    SetWRect(100,100,400,220);
    h = 100;v=10;
    // PeriodField(h,v,"Periods");
    EditField(h,v,82,"Skait. ID",ViewOnly,long1,false,0);
    EditField(h,v+=20,82,"Skait. Nr",ViewOnly,f2,false,0);
    EditField(h,v+=20,82,"Vecais tips",ViewOnly,f3,false,0);
    EditField(h,v+=20,82,"Jaunais tips",Normal,f4,false,INSClass);
    CheckBox(h,v+=20,0,"Nomainīt līgumā pakalpojumu",flags[1]);
    CheckBox(h,v+=20,0,"Nomainīt skaitītāju rādījumiem",flags[2]);
  EndWindow;

  return;
end;

window RecalcIVInfoVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("Atjaunot informāciju rēķinā",RecalcIVInfoVClass,CGMnt,RcType);
    SetWRect(20,80,420,360);
    EditField(h=140,v=6,100,"Rēķ.Nr(no:līdz)",Normal,f1,false,0);
    CheckBox(h=40,v+=20,0,"Atjaunot rēķina realizācijas kontu",flags[0]);
    EditField(h=140,v+=20,150,"Artikuli",Normal,f2,false,INSClass);
    StaticText(h=40,v+=40,"Rēķina rindās tiek mainīts real.konts, pvn kods",false);
    StaticText(h,v+=16,"Rēķinā tiek atjaunots debitoru konts",false);
    StaticText(h,v+=16,"Rēķins tiek pārgrāmatots",false);
    CheckBox(h,v+=20,0,"Atjaunot ēkas un telpas kodu",flags[1]);
    CheckBox(h+180,v,0,"Tukšām ēkām",flags[4]);
    CheckBox(h+10,v+=20,0,"Kļūdas hansa.log failā",flags[2]);
    CheckBox(h,v+=20,0,"Pārrēķināt kopsummas",flags[3]);
    CheckBox(h,v+=20,0,"Grāmatotos rēķinus nepārgrāmatot (saglabāt izmaiņas bez pārbaudes)",flags[5]);
    StaticText(h=60,v+=28,"Ja apkalpošana palaista bez šīs atzīmes, tad pēc apkalpošanas",false);
    StaticText(h,v+=16,"papildus jāpārrēķina izmainīto rēķinu e-sadaļas",false);
  EndWindow;

  return;
end;

window PDFInvRemakeVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("PDF rēķinu pārveidošana",PDFInvRemakeVClass,CGMnt,RcType);
    SetWRect(20,80,350,280);
    PeriodField(h=50,v=20,"Periods");
    EditFieldTL(h=50,v+=20,100,"Ēka",M4Code,Normal,50,f1,false,BuildSClass);
    StaticText(h,v+=40,"Apkalpošana dzēš rēķiniem piesaistītās",false);
    StaticText(h,v+=20,"izdrukas PDF formā un veido jaunas",false);
    //StaticText(h,v+=20,"par kļūdu, jāmēģina iegrāmatot maksājums.",false);
  EndWindow;

  return;
end;

window OBS_PastePerSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot periodu",OBS_PastePerSClass,CGother,HBlRecType);
    SetWRect(20,80,250,400);
    Sizeable(-1,-1,0,0);
    StringList(9,9,-40,-10);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window FlatsWithCoefRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Telpas ar koeficientiem",FlatsWithCoefRClass,CGRcW,RcType);
    SetWRect(100,100,500,400);
    // StaticText(20,40, "Nospiediet OK, lai palaistu atskaiti!",0);
  EndWindow;

  return;
end;

window BuildCalcPaybackRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs,vm;

  WindowBegin("Ēkas aprēķins/apmaksa",BuildCalcPaybackRClass,CGRcW,RcType);
    SetWRect(100,100,500,200);
    h=140;v=10;vs=20;
    PeriodField(h,v,"Periods");
    EditField(h,v+=vs,100,"Ēka",Normal,f1,false,BuildSClass);
    ButtonFrame(h=60,vm=(v+41),80,2,"Rādīt");
    RadioButton(h+=10,v=vm,0,0,"Pārskats",ArtMode);
    RadioButton(h,v+=16,1,0,"Detalizēti",ArtMode);
    CheckBox(h=220,v=vm,0,"Iekļaut vecos līgumus",flags[0]);
  EndWindow;

  return;
end;

window CreateIntPercInvoicesVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Veidot līgumsoda rēķinus",CreateIntPercInvoicesVClass,CGMnt,RcType);
    SetWRect(20,80,400,380);
    h=100;v=10;vs=20;
    PeriodField(h,v,"Periods");
    EditFieldTL(h,v+=vs,82,"Rēķ. datums",M4Date,Normal,0,RegDate,false,PasteCurDate);
    EditFieldTL(h,v+=vs,82,"Līgums",M4Long,Normal,0,long1,false,NAContractSClass);
    CheckBox(h,v+=vs,1,"Grāmatot izveidotos rēķinus",flags[4]);
    CheckBox(h,v+=vs,1,"Veidot rēķinu tikai līgumiem ar e-pastiem",flags[29]);
  EndWindow;

  return;
end;

window MSUndoInvWClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Atcelt rēķinu",MSUndoInvWClass,CGother,RcType);
    SetWRect(20,80,300,180);
    Sizeable(-1,-1,-1,-1);
    UseView(RcVc)
    StaticText(60,30,"Vai tiešām vēlaties atcelt rēķinu?",false);
    HalPushButton(50,60,130,120,"MSUndoInvYesbtn","Jā");
    HalPushButton(150,60,230,120,"MSUndoInvNobtn","Nē");
  EndWindow;
  
  return;
end;

window ActiveCOCheckRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs,vm;

  WindowBegin("Aktīvo līgumu pārbaude",ActiveCOCheckRClass,CGRcW,RcType);
    SetWRect(100,100,500,200);
    EditField(h=140,v=6,100,"Datums",Normal,d1,false,PasteCurDate);
    CheckBox(h,v+=20,0,"Telpas",flags[0]);
    CheckBox(h,v+=16,0,"Ēkas",flags[1]);
    CheckBox(h,v+=16,0,"Apvienotie",flags[2]);
  EndWindow;
  
  return;
end;

window CountResFlatsSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot telpu",CountResFlatsSClass,CGother,HBlRecType);
    SetWRect(20,80,300,200);
    Sizeable(-1,-1,0,0);
    StringList(9,9,-40,-10);
  EndWindow;

  return;
end;

window MSCalcCompRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,v,vs,vm;

  WindowBegin("Aprēķinu salīdzināšana",MSCalcCompRClass,CGRcW,RcType);
    SetWRect(100,100,400,240);
    h = 100;v=10;
    PeriodField(h,v,"Periods");
    // EditFieldTL(h,v+=20,82,"Rēķ. datums",M4Date,Normal,0,RegDate,false,PasteCurDate);
    EditFieldTL(h,v+=20,100,"Ēka",M4Code,Normal,50,f1,false,BuildSClass);
    EditFieldTL(h,v+=20,100,"Telpu grupa",M4Str,Normal,50,f4,false,FlatGroupSClass);
    EditFieldTL(h,v+=20,100,"Klasifikācija",M4UStr,Normal,50,f3,false,MSClassSClass);
    EditFieldTL(h,v+=20,100,"Telpa",M4Code,Normal,50,f2,false,FlatsSClass);
    // vm = v+=48;
    // ButtonFrame(h=20,v=vm,70,2,"Rādīt");
    // RadioButton(h+=10,v=vm,0,0,"Detalizēti",ArtMode);
    // RadioButton(h,v+=16,1,0,"Pārskats",ArtMode);
    // EndFrame;
    // ButtonFrame(h=140,v=vm,140,2,"Rādīt");
    // CheckBox(h+=10,v,0,"Tikai telpas bez rēķiniem",flags[0]);
    // CheckBox(h,v+=16,0,"Summas no rēķina",flags[1]);
    // CheckBox(h,v+=16,0,"Ģenerēt līgumsodu",flags[2]);
    // EndFrame;
  EndWindow;

  return;
end;

window RemCounterResVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,v,vs;

  WindowBegin("Dzēst rādījums",RemCounterResVClass,CGMnt,RcType);
    SetWRect(100,100,400,220);
    h = 100;v=10;
    PeriodField(h,v,"Periods");
    EditField(h,v+=20,82,"Skait. numurs",Normal,f1,false,FlatCountersSClass);
    EditField(h,v+=20,82,"Skait. tips",Normal,f2,false,0);
    EditField(h,v+=20,82,"Ēka",Normal,f3,false,BuildSClass);
    CheckBox(h-20,v+=30,0,"Namsaimnieka skaitītāji",flags[0]);
  EndWindow;

  return;
end;

window CRIXlsInputWClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Saraksta ievade",CRIXlsInputWClass,CGother,HBlRecType);
    SetWRect(20,80,500,400);
    Sizeable(0,-1,0,0);
    UseView(IVVc);
    MatrixBegin(8,26,-31,-20,-,199);
    MatCol(1,24,"Telpa",0,ArtCode,false,FlatsSClass);
    MatCol(1,130,"Dz. nr.",0,Spec,false,0);
    MatCol(1,250,"Aprēķins",0,SerialNr,false,0);
    MatCol(1,-70,"Patēriņš",0,SourceTransNr,true,0);
    EndMatrix;
    HalPushButton(-210,-30,-10,-30,"CreateXlsCRIbtn","Veidot rādījumu ievadi");
  EndWindow;
    
  return;
end;

window CountResIClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Skaitītāju rādījumu imports",CountResIClass,CGIcW,RcType);
    SetWRect(20,80,350,130);
    CheckBox(70,16,0,"Atjaunot deklarēto personu datus",flags[0]);
  EndWindow;

  return;
end;

window MSCRIWClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Veidot ievade",MSCRIWClass,CGother,RcType);
    SetWRect(20,80,300,180);
    Sizeable(-1,-1,-1,-1);
    UseView(RcVc)
    StaticText(60,30,"Vai tiešām vēlaties veidot ievadi?",false);
    EditField(20,40,240,"",ViewOnly,f1,false,0);
    HalPushButton(50,60,130,120,"MSCRIYesbtn","Jā");
    HalPushButton(150,60,230,120,"MSUndoInvNobtn","Nē");
  EndWindow;
  
  return;
end;

window BuildDebtRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,v,vm;

  WindowBegin("Ēku parādi",BuildDebtRClass,CGRcW,RcType);
    SetWRect(100,100,500,200);
    h=140;v=10;
    EditField(h,v,100,"Ēka",Normal,f1,false,BuildSClass);
    EditField(h,v+=20,100,"Ēku klasifikācija",Normal,f2,false,MSClassSClass);
    EditField(h,v+=20,100,"Datums",Normal,d1,false,PasteCurDate);
    PeriodField(h,v+=20,"Salīdzināšanas periods");
    ButtonFrame(h1=20,vm=(v+40),140,4,"Rādīt");
    RadioButton(h1,v=vm,0,0,"Pārskats",ArtMode);
    RadioButton(h1,v+=16,1,0,"Pārskats + TG",ArtMode);
    RadioButton(h1,v+=16,2,0,"Detalizēti",ArtMode);
    CheckBox(h1+20,v+=16,0,"Veco līgumu sadaļa",flags[2]);
    CheckBox(h+70,v=vm,0,"Iekļaut vecos līgumus",flags[0]);
    CheckBox(h+70,v+=16,0,"Bez soda summām",flags[1]);
    CheckBox(h+70,v+=16,0,"Nerādīt rindas bez parāda",flags[3]);
    CheckBox(h+70,v+=16,0,"Nerādīt klienta nosaukumu",flags[4]);
    // CheckBox(h+70,v+=16,0,"Bez JSTU",flags[5]);
    CheckBox(h+70,v+=16,0,"Parāda koeficents",flags[6]);

  EndWindow;

  return;
end;

window MSBuildRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Veidot ēku sarakstu",MSBuildRClass,CGrCW,-);
    SetWRect(20,80,400,180);
    EditField(120,6,100,"Klasifikācija",Normal,f1,false,MSClassSClass);
  EndWindow;

  return;
end;

window PDFInvGenLangTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("PDF rēķinu valodas",PDFInvGenLangTClass,CGHbl,HBlRecType);
    SetWRect(20,80,332,257);
    Sizeable(-1,-1,0,0);
    SetBlid(PDFInvGenLangBlock);
    MatrixBegin(8,20,-31,-20,-,99);
    MatCol(1,24,"Org. valoda",0,OrgLang,false,LangSClass);
    MatCol(1,100,"PDF valoda",0,PDFLang,false,LangSClass);
    MatCol(1,180,"Sec.",0,intdocnr,false,0);
    // MatCol(1,225,"Ģen. valoda",0,GenLang,false,LangSClass);
    EndMatrix;
  EndWindow;

  return;
end;

window PayOverviewRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Maksājumu pārskats",PayOverviewRClass,CGRcW,RcType);
    SetWRect(20,80,400,160);
    PeriodField(150,6, "Periods");
  EndWindow;

  return;
end;

window ServCalcPayRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,v,vm;

  WindowBegin("Pakalpojumu aprēķins / apmaksas",ServCalcPayRClass,CGRcW,RcType);
    SetWRect(100,100,500,200);
    h=140;v=10;
    PeriodField(h,v, "Periods");
    EditField(h,v+=20,100,"Ēka",Normal,f1,false,BuildSClass);
    EditField(h,v+=20,100,"Ēku klasifikācija",Normal,f2,false,MSClassSClass);
    ButtonFrame(h1=20,vm=(v+40),140,3,"Rādīt");
    RadioButton(h1,v=vm,0,0,"Pārskats",ArtMode);
    RadioButton(h1,v+=16,1,0,"Detalizēti",ArtMode);
    RadioButton(h1,v+=16,2,0,"Detalizēti (Excel)",ArtMode);
    EndFrame;
    CheckBox(h1=220,v=(vm),0,"Iekļaut Beigušos līgumus",flags[0]);
  EndWindow;

  return;
end;

window NAContractRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Drukāt līgumu",NAContractRClass,CGrCW,RcType);
    SetWRect(100,100,400,220);
    h=100; v=10; vs=20;
    EditField(h,v,100,"Līgums",Normal,long1,false,NAContractSClass);
  EndWindow;
  
  return;
end;

window PrintFieldTestRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real v,h;
  
  WindowBegin("Veidot atskaiti",PrintFieldTestRClass,CGrCW,-);
    SetWRect(20,80,400,180);
    EditField(100,10,100,"Datums",Normal,d1,false,PasteCurDate);
    CheckBox(h=100,v=30,0,"Vairāki īpašnieki",flags[0]);
    CheckBox(h,v+=16,0,"Bez īpašnieka",flags[1]);
    CheckBox(h,v+=16,0,"Viens īpašnieks",flags[2]);
  EndWindow;

  return;
end;

window InvMergeRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real v,h;
  
  WindowBegin("Rēķinu apvienošana",InvMergeRClass,CGrCW,-);
    SetWRect(100,100,400,240);
    h = 100;v=10;
    PeriodField(h,v,"Periods");
    EditFieldTL(h,v+=20,100,"Klients",M4Code,Normal,50,f1,false,CUSClass);
  EndWindow;

  return;
end;

window DefaultItemDClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("Pakalpojumu komplekts",DefaultItemDClass,CGview,-);
    SetWRect(64,80,709,380);
    UseView(DefaultItemVc);
    v = 6; h = 80;
    EditField(h,v, 100,"Kods",Normal,Code,false,0);
    EditField(h=290,v,-40,"Nosaukums",Normal,Description,false,0);
    MatrixBegin(4,v=46,-50,-19,-,999);
    MatCol(1,32,"Pakalpojums",0,ArtCode,false,INSClass);
    MatCol(1,114,"Lauks",0,QtyField,false,FlatFieldCodeSClass);
    EnterSkip(ArtCode);
    MatColTL(1,264,"Vienības apraksts",0,-1,Normal,-1,UnitText,false,0);
    MatCol(1,-180,"Nosaukums",0,Spec,false,0);
    EndMatrix;
  EndWindow;

  return;
end;

window DefaultItemLClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Pakalpojumu komplekti",DefaultItemLClass,CGmlist,-);
    SpawnClass(DefaultItemDClass);
    SetWRect(64,80,509,298);
    Sizeable(-1,-1,0,0);
    UseView(DefaultItemVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlCol(131,131,"Nosaukums",Description,false);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window DefaultItemSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot Pakalpojumu komplektu",DefaultItemSClass,CGslist,-);
    SpawnClass(DefaultItemDClass);
    SetWRect(64,80,509,298);
    Sizeable(-1,-1,0,0);
    UseView(DefaultItemVc);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Kods",Code,false,Code);
    RlCol(131,131,"Nosaukums",Description,false);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window InvToEmailTaskWClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  record InvToEmailTaskBlock InvToEmailTaskBl;
  real h,v;

  WindowBegin("Sūtīt rēķinus uz e-pastu statuss",InvToEmailTaskWClass,CGother,RcType);
    DynamicWindow;
    SetWRect(100,120,500,240);
    AutoSizeWindow(false);
    WhiteBackground;
    Modality(kModalityGlobal);
    BlockLoad(InvToEmailTaskBl);
    if InvToEmailTaskBl.RunFlag==1 then begin
      v=50;
      StaticText(30,30,"Tiek sūtīti e-pasti",0);
      ProgressBar(20,v,-20,v+12,"TransferSz","TransferPos");
    end else begin
      SoftEditField(80,40,-40,"Statuss",ViewOnly,"TRANSSTAT",false,0,M4Str,120);
    end;
  EndWindow;
  
  return;
end;

window InvToEmailTaskTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;

  WindowBegin("Sūtīt rēķinus uz e-pastu (task) uzstādījumi",InvToEmailTaskTClass,CGSbl,-);
    SetBlid(InvToEmailTaskBlock);
    SetWRect(64,80,400,300);
    Sizeable(-1,-1,0,0);
    EditField(h=150,v=10,100,"Intervāls",Normal,Interval,false,0);
    EditField(h,v+=20,100,"Cikla pozīcija",Normal,Looppos,false,0);
    EditField(h,v+=20,100,"Nosūtītit",Normal,Send,false,0);
    EditField(h,v+=20,100,"Kopā",Normal,Total,false,0);
    EditField(h,v+=20,100,"Parametri",Normal,Parameters,false,0);
    EditField(h,v+=20,100,"Datums",Normal,OnDate,false,0);
    EditField(h,v+=20,100,"Laiks",Normal,OnTime,false,0);
    CheckBox(75,v+=32,0,"Tiek sūtīts",RunFlag);
  EndWindow;

  return;
end;

window LSItemTRTClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Soda artikulu grāmatošana",LSItemTRTClass,CGHbl,HBlRecType);
    SetBlid(LSItemTRBlock);
    SetWRect(64,80,412,298);
    Sizeable(-1,-1,0,0);
    MatrixBegin(4,27,-21,-20,-,99);
    MatCol(1,32,"Artikuls",0,ArtCode,false,INSClass);
    MatCol(1,100,"Deb. konts",0,SLAcc,false,AccSClass);
    MatCol(1,180,"Real. konts",0,ARAcc,false,AccSClass);
    MatCol(1,260,"Sam. konts",0,PayAcc,false,AccSClass);
    EndMatrix;
  EndWindow;

  return;
end;

window PDFInvRemakeRecVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Rēķina PDF pielikuma atjaunošana",PDFInvRemakeRecVClass,CGMnt,RcType);
    SetWRect(20,80,350,280);
    StaticText(30,10,"Lai dzēstu un atjaunotu PDF pielikumu, spiest Ok",false);
  EndWindow;

  return;
end;

window SuspIntPercRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  WindowBegin("Apturētie soda %",SuspIntPercRClass,CGRcW,RcType);
    SetWRect(100,100,500,200);
    h=140;v=10;vs=20;
    PeriodField(h,v,"Periods");
  EndWindow;

  return;
end;

window FillAddrFieldsVClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Adrešu lauku atjaunošana",FillAddrFieldsVClass,CGMnt,RcType);
    SetWRect(20,80,400,180);
    StaticText(20,40, "Nospiediet OK, lai palaistu apkalpošanu!",0);
  EndWindow;

  return;
end;

window MSClass2SClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot klasi",MSClass2SClass,CGother,HBlRecType);
    SetWRect(20,80,250,400);
    Sizeable(-1,-1,0,0);
    StringList(9,9,-40,-10);
    SearchField("Meklēt");
  EndWindow;

  return;
end;

window ContractCalcPayRClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm;

  WindowBegin("Līgumu aprēķins/apmaksa",ContractCalcPayRClass,CGRcW,RcType);
    SetWRect(20,80,400,290);
    PeriodField(h=120,v=6,"Periods");
    CheckBox(h-60,v+=20,0,"Neizvadīt līgumus, bez atlikumiem un apgrozījuma",flags[0]);
  EndWindow;

  return;
end;

window PerYearSClass:1
  wtag("language","LAT"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin

  WindowBegin("Ievietot periodu",PerYearSClass,CGother,HBlRecType);
    SetWRect(20,80,250,400);
    Sizeable(-1,-1,0,0);
    StringList(9,9,-40,-10);
    SearchField("Meklēt");
  EndWindow;

  return;
end;
